namespace = ev_maintenance
#说明事件
country_event = {
	id = ev_maintenance.0
	title = "ev_maintenance.0.title"
	desc = ev_maintenance.0.desc
	picture = GFX_evt_cargoship_caravan

	#diplomatic = yes
	#diplomatic_title = "ev_maintenance.0.title"
	#custom_gui = "ev_event_diplomacy_shipyard_settings_window" #窗口
	#custom_gui_option = "ev_event_diplomacy_shipyard_settings_option" #选项
	#picture_event_data = { room = ev_void_room } #图片只能用room
	is_triggered_only = yes
	option = {
		name = ev_maintenance.0.a
		remove_country_flag = has_open_maintenance_show
	}
}

#每月判定和生成
event = {
	id = ev_maintenance.1
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		##################
		#在野矿上面获得加成
		##################
		
		every_country = {
			limit = {
				is_default_ev_country_type = yes
			}
			#给所有船坞家园舰上construction_type （傻逼蠢驴）
			every_owned_fleet = {
				limit = {
					is_any_type_homeless_ship_starbase = yes
				}
				starbase = {
					set_ship_construction_type = starbase_shipyard
				}
			}
			#强制开边
			every_country = {
				limit = {
					is_country_type = default
				}
				set_closed_borders = {
					who = prev
					status = no
					forced = 10
				}
			}

			#根据已有的思潮修正锁定思潮
			ev_lock_fanatic_ethic_by_modifier = yes


			#给格式塔的内阁加成
			ev_give_councilor_gestalt_civic_buff = yes
			#if = {
			#	limit = { is_gestalt = yes }
			#	remove_modifier = civic_ev_industrial_production_gestalt
			#	remove_modifier = civic_ev_ship_research_gestalt
			#	remove_modifier = civic_ev_exploration_of_space_gestalt
			#	remove_modifier = civic_ev_maintenance_add_gestalt
			#	remove_modifier = civic_ev_food_to_energy_gestalt
			#	remove_modifier = civic_ev_space_miners_gestalt
			#	remove_modifier = civic_ev_space_survey_gestalt
			#	remove_modifier = civic_ev_rare_crystals_lithoid_gestalt
			#	remove_modifier = civic_ev_volatile_motes_lithoid_gestalt
			#	remove_modifier = civic_ev_exotic_gases_lithoid_gestalt
			#	remove_modifier = civic_ev_mechanics_unity_gestalt
			#	remove_modifier = civic_ev_god_elect_gestalt
			#	remove_modifier = civic_ev_temporary_habitat_gestalt
			#	remove_modifier = civic_ev_corvette_ship_gestalt
			#	remove_modifier = civic_ev_titan_ship_gestalt
			#	remove_modifier = civic_ev_web_economy_gestalt
			#	remove_modifier = civic_ev_powerful_ship_gestalt
			#	remove_modifier = civic_ev_defense_ship_gestalt
			#	remove_modifier = civic_ev_planet_and_fleet_gestalt
			#	remove_modifier = civic_ev_acting_like_ghost_gestalt
			#	remove_modifier = civic_ev_boom_homeless_gestalt
			#	remove_modifier = civic_ev_no_war_gestalt
			#	remove_modifier = civic_ev_shadow_fleet_gestalt
			#	if = {
			#		limit = { has_civic = civic_ev_industrial_production }
			#		add_modifier = {
			#			modifier = civic_ev_industrial_production_gestalt mult = value:ev_count_councilor_gestalt_regulatory_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_ship_research }
			#		add_modifier = {
			#			modifier = civic_ev_ship_research_gestalt mult = value:ev_count_councilor_gestalt_cognitive_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_exploration_of_space }
			#		add_modifier = {
			#			modifier = civic_ev_exploration_of_space_gestalt mult = value:ev_count_councilor_gestalt_cognitive_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_maintenance_add }
			#		add_modifier = {
			#			modifier = civic_ev_maintenance_add_gestalt mult = value:ev_count_councilor_gestalt_legion_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_food_to_energy }
			#		add_modifier = {
			#			modifier = civic_ev_food_to_energy_gestalt mult = value:ev_count_councilor_gestalt_growth_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_space_miners }
			#		add_modifier = {
			#			modifier = civic_ev_space_miners_gestalt mult = value:ev_count_councilor_gestalt_regulatory_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_space_survey }
			#		add_modifier = {
			#			modifier = civic_ev_space_survey_gestalt mult = value:ev_count_ouncilor_gestalt_cognitive_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_rare_crystals_lithoid }
			#		add_modifier = {
			#			modifier = civic_ev_rare_crystals_lithoid_gestalt mult = value:ev_count_councilor_gestalt_growth_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_exotic_gases_lithoid }
			#		add_modifier = {
			#			modifier = civic_ev_exotic_gases_lithoid_gestalt mult = value:ev_count_councilor_gestalt_growth_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_volatile_motes_lithoid }
			#		add_modifier = {
			#			modifier = civic_ev_volatile_motes_lithoid_gestalt mult = value:ev_count_councilor_gestalt_growth_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_mechanics_unity }
			#		add_modifier = {
			#			modifier = civic_ev_mechanics_unity_gestalt mult = value:ev_count_councilor_gestalt_regulatory_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_god_elect }
			#		add_modifier = {
			#			modifier = civic_ev_god_elect_gestalt mult = value:ev_count_councilor_gestalt_cognitive_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_temporary_habitat }
			#		add_modifier = {
			#			modifier = civic_ev_temporary_habitat_gestalt mult = value:ev_count_councilor_gestalt_regulatory_level
			#		}
			#	}
		#
			#	if = {
			#		limit = { has_civic = civic_ev_corvette_ship }
			#		add_modifier = {
			#			modifier = civic_ev_corvette_ship_gestalt mult = value:ev_count_councilor_gestalt_legion_level
			#		}
			#	}
		#
			#	if = {
			#		limit = { has_civic = civic_ev_titan_ship }
			#		add_modifier = {
			#			modifier = civic_ev_titan_ship_gestalt mult = value:ev_count_councilor_gestalt_legion_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_web_economy }
			#		add_modifier = {
			#			modifier = civic_ev_web_economy_gestalt mult = value:ev_count_councilor_gestalt_regulatory_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_powerful_ship }
			#		add_modifier = {
			#			modifier = civic_ev_powerful_ship_gestalt mult = value:ev_count_councilor_gestalt_regulatory_level
			#		}
			#	}
			#	
			#	if = {
			#		limit = { has_civic = civic_ev_defense_ship }
			#		add_modifier = {
			#			modifier = civic_ev_defense_ship_gestalt mult = value:ev_count_councilor_gestalt_legion_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_planet_and_fleet }
			#		add_modifier = {
			#			modifier = civic_ev_planet_and_fleet_gestalt mult = value:ev_count_councilor_gestalt_regulatory_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_acting_like_ghost }
			#		add_modifier = {
			#			modifier = civic_ev_acting_like_ghost_gestalt mult = value:ev_count_councilor_gestalt_regulatory_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_boom_homeless }
			#		add_modifier = {
			#			modifier = civic_ev_boom_homeless_gestalt mult = value:ev_count_councilor_gestalt_regulatory_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_no_war }
			#		add_modifier = {
			#			modifier = civic_ev_no_war_gestalt mult = value:ev_count_councilor_gestalt_legion_level
			#		}
			#	}
			#	if = {
			#		limit = { has_civic = civic_ev_shadow_fleet }
			#		add_modifier = {
			#			modifier = civic_ev_shadow_fleet_gestalt mult = value:ev_count_councilor_gestalt_legion_level
			#		}
			#	}
			#	
			#}
			
			

			#计算加成
			count_planet_jobs_proudce_buff = yes
			
			if = {
				limit = {
					has_civic = civic_ev_planet_and_fleet
				}
				remove_modifier = empty_vagrant_landed_planet
			}

			#佣兵集团民政
			remove_modifier = civic_ev_merc_enclave_fleet_var
			if = {
				limit = { has_civic = civic_ev_merc_enclave_fleet }
				

				save_event_target_as = civic_ev_merc_enclave_fleet_buff_country
				add_modifier = {
					modifier = civic_ev_merc_enclave_fleet_var 
					multiplier = value:ev_created_merc_number
				}
				
			}
			

			#重置破坏性开采等级
			set_variable = {
				which = ev_planet_mining_tech_level
				value = value:ev_planet_mining_tech_level_var
			}
			every_owned_fleet = {
				set_variable = {
					which = ev_planet_mining_tech_level
					value = owner.ev_planet_mining_tech_level
				}
			}


			#维持度变动
			#remove_ev_maintenance_buff = yes
			if = {
				limit = {
					is_default_ev_country_type = yes
					NOR = {
						has_authority = auth_machine_intelligence
						has_authority = auth_hive_mind
					}
				}
				save_event_target_as = default_ev_country_need_maintenance
				maintenance_change_var_new = yes

			}
			else = {
				end_event_chain = "ev_maintenance_chain"
			}

			
			#民政效果
			
			if = {
				limit = {
					is_at_war = yes
				}
				change_variable = {
					which = ev_struggle_value
					value = 0.02
				}
				if = {
					limit = {
						has_civic = civic_ev_missionary
					}
					#武装传教士的额外效果
					remove_modifier = civic_ev_missionary_extra_effect
					add_modifier = {
						modifier = civic_ev_missionary_extra_effect
						days = 31
					}
				}
			}

			#分部花费
			remove_modifier = ev_planet_branch_offices_cost_1
			if = {
				limit = {
					num_starbases > 0
				}
				add_modifier = {
					modifier = ev_planet_branch_offices_cost_1
					days = -1
				}
			}

			#######################舰队贸易####
			ev_remove_ev_buff_homeless_trade_produces_add_buff = yes #消除buff
			every_owned_fleet = {
				limit = {
					any_controlled_ship = {
						is_any_type_homeless_ship = yes
					}
				}
				#破坏性开采
				ev_homeless_orbit_mining_effect = yes
				#拟真模式
				#ev_simreal_homeless_orbit_mining_effect = yes	
				
				ev_trade_fleet_give_resources_all_var = yes #获得总计数值
			}
			ev_give_ev_buff_homeless_trade_produces_add_buff = yes #给buff

			########################舰队贸易####本来应该这样写，但为了节省性能
			#ev_remove_ev_buff_homeless_trade_produces_add_buff = yes
			#every_owned_fleet = {
			#	limit = {
			#		any_controlled_ship = {
			#			is_any_type_homeless_ship = yes
			#		}
			#	}
			#	ev_trade_fleet_give_resources_all_var = yes #获得总计数值
			#}
			#ev_give_ev_buff_homeless_trade_produces_add_buff = yes
			############################舰队贸易结束####


			########################轨道轰炸得资源####
			ev_remove_orbital_bombardment_steal_all_buff = yes
			save_global_event_target_as = ev_will_orbital_bombardment_steal_country
			#every_fleet_in_orbit = { }
			every_owned_fleet = {
				limit = {
					fleet_power > 0
					exists = orbit
					orbit = {
						planet_devastation >= 10
						has_orbital_bombardment_stance = steal_ev
						NOT = {
							has_planet_flag = stealed_ev_planet
						}
						owner = {
							is_at_war_with = event_target:ev_will_orbital_bombardment_steal_country
						}
					}
				}
				orbit = {
					save_global_event_target_as = ev_been_orbital_bombardment_steal_planet
					set_timed_planet_flag = {
						flag = stealed_ev_planet days = 30 #防止一个星球被无数个舰队轰炸
					}
				}
				owner = {
					switch = {
						trigger = has_policy_flag
						orbital_bombardment_steal_2th = {
							event_target:ev_been_orbital_bombardment_steal_planet = { 
								steal_ev_random_2th_resources = { VAR = 1 } 
							}
						}
						orbital_bombardment_steal_1th = {
							event_target:ev_been_orbital_bombardment_steal_planet = { 
								steal_ev_random_1th_resources = { VAR = 1 } 
							}
						}
						orbital_bombardment_steal_all = {
							event_target:ev_been_orbital_bombardment_steal_planet = { 
								steal_ev_random_1th_resources = { VAR = 1 } 
								steal_ev_random_2th_resources = { VAR = 1 } 
							}
						}
					}
				}
				clear_global_event_target = ev_been_orbital_bombardment_steal_planet
				
				 #获得总计数值
			}
			ev_give_orbital_bombardment_steal_all_buff = yes
			clear_global_event_target = ev_will_orbital_bombardment_steal_country
			############################轨道轰炸结束####


			#大使船
			remove_modifier = ev_ambassador_ship_modifier_1

			set_variable = {
				which = count_ev_ambassador_ship
				value = value:ev_ambassador_ship_var
			}
			#every_owned_ship = {
			#	limit = {
			#		is_ship_size = ev_ambassador_ship
			#	}
			#	owner = {
			#		change_variable = {
			#			which = count_ev_ambassador_ship
			#			value = 1
			#		}
			#	}
			#}
			#if = {
			#	limit = { has_civic = civic_ambassador_ship }
			#	multiply_variable = {
			#		which = count_ev_ambassador_ship
			#		value = 2
			#	}
			#}
			add_modifier = {
				modifier = ev_ambassador_ship_modifier_1 multiplier = count_ev_ambassador_ship
			}


			#星差号
			remove_modifier = this_ev_xing_cha_country
			random_controlled_ship = {
				limit = {
					has_ship_flag = this_ev_xing_cha
				}
				owner = {
					add_modifier = {
						modifier = this_ev_xing_cha_country
						days = -1
					}
				}
			}

			#计算规模
			set_variable = {
				which = ev_count_cap_cost
				value = value:ev_cap_cost
			}

			#every_owned_ship = {
			#	limit = {
			#		
			#		OR = {
			#			is_ship_size = homeless_ship
			#			is_ship_size = homeless_ship_starbase
			#			is_ship_size = private_homeless_ship
			#			is_ship_size = private_homeless_ship_starbase
			#			#				
			#		}
			#	}
			#	owner = { change_variable = { which = ev_count_cap_cost value = 1 } }
			#}
			#every_owned_ship = {
			#	limit = {
			#		OR = {
			#			is_ship_size = megastructures_homeless_ship
			#		}
			#	}
			#	owner = { change_variable = { which = ev_count_cap_cost value = 15 } }
			#}
			#容量使用修正
			remove_modifier = ev_count_cap_modifier
			add_modifier = {
				modifier = ev_count_cap_modifier
				multiplier = value:ev_cap_cost
			}

			#计算贩奴公会
			if = {
				limit = {
					has_civic = civic_ev_slave_ship
					
				}
				add_modifier = {
					modifier = ev_civic_ev_slave_ship_produces
					mult = value:ev_count_slave_pop
				}
			}

			
			
		}
		#生成星系
		#if = {
		#	limit = {
		#		NOT = { has_global_flag = has_mumu_init_flag }
		#	}
		#	
		#	set_spawn_system_batch = begin
		#	# batch-processes the spawn_system effects between "begin" and "end",
		#	# so caches are recalculated only once rather than for every system spawned
		#	# can also be used when removing and adding hyperlanes
		#	no_scope = {
		#		# makes system positions originate from galactic core
		#		spawn_system = {
		#			min_distance >= 990
		#			max_distance <= 1000
		#			min_orientation_angle = 1
		#			max_orientation_angle = 2
		#			initializer = "ev_mumu_init_01"
		#			hyperlane = no
		#		}
		#	}
		#	set_spawn_system_batch = end
		#	set_global_flag = has_mumu_init_flag
		#}
		#every_planet = {
		#	limit = {
		#		any_owned_species = {
		#			has_trait = trait_ev_minerals_add_1
		#		}
		#	}
		#	every_pop = {
		#		limit = {
		#			always = yes
		#		}
		#		planet = {
		#			remove_deposit = d_ev_deep_excavation_8
		#		}
		#	}
		#	every_pop = {
		#		limit = {
		#			has_trait = trait_ev_minerals_add_1
		#		}
		#		planet = {
		#			add_deposit = d_ev_deep_excavation_8
		#		}
		#	}
		#}
		#every_country = {
		#	limit = {
		#		is_default_ev_country_type = yes
		#	}
		#	set_variable = {
		#		which = ev_job_value
		#		value = 0
		#	}
		#	every_owned_pop_group = { 
		#		limit = {	has_job = ev_slave_worker }
		#		owner = {
		#			change_variable = {
		#				which = ev_job_value
		#				value = 1
		#			}
		#		}
		#	} 
		#	
		#}
		##############################
		#
		##############################
		#every_country = {
		#	limit = {
		#		is_default_ev_country_type = yes
		#		is_gestalt = no
		#	}
		#	##############################
		#	#硬核模式
		#	############################
		#	#if = {
		#	#	limit = {
		#	#		has_country_flag = enable_ev_hard_core
		#	#	}
		#	#	#由于数值导致的随机事件
		#	#	#random_controlled_fleet = {
		#	#	#	limit = {
		#	#	#		check_variable = {
		#	#	#			which = ev_ship_crime
		#	#	#			value > 30
		#	#	#		}
		#	#	#	}
		#	#	#	random_list = {
		#	#	#		9 = {
		#	#	#		}
		#	#	#		1 = {
		#	#	#			fleet_event = {
		#	#	#				id = ev_hard_core.100
		#	#	#				days = 1
		#	#	#				random = 25
		#	#	#			}
		#	#	#		}
		#	#	#	}
		#	#	#}
		#	#	#硬核
		#	#	#every_owned_ship = {
		#	#	#	limit = {
		#	#	#		is_any_type_homeless_ship = yes
		#	#	#	}
		#	#	#	#设定基础
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			NOR = {
		#	#	#				is_variable_set = ev_ship_education
		#	#	#				is_variable_set = ev_ship_development
		#	#	#				is_variable_set = ev_ship_stability
		#	#	#				is_variable_set = ev_ship_crime
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_stability
		#	#	#			value = 50
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_development
		#	#	#			value = 10
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_education
		#	#	#			value = 40
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_crime
		#	#	#			value = 5
		#	#	#		}
		#	#	#	}
		#	#	#	############
		#	#	#	#由于事件的政策
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			has_ship_flag = ev_support_infrastructure
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_development
		#	#	#			value = 0.25
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			has_ship_flag = ev_support_education
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_education
		#	#	#			value = 0.15
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			has_ship_flag = ev_against_crime
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_crime
		#	#	#			value = -0.2
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			has_ship_flag = ev_support_crime
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_crime
		#	#	#			value = 0.25
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			has_ship_flag = ev_support_infrastructure_because_education
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_development
		#	#	#			value = 0.25
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_education
		#	#	#			value = -0.1
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			has_ship_flag = ev_support_stability_because_crime
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_crime
		#	#	#			value = 0.25
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_stability
		#	#	#			value = 0.01
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			has_ship_flag = ev_support_development_because_stability
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_development
		#	#	#			value = 0.1
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_stability
		#	#	#			value = -0.05
		#	#	#		}
		#	#	#	}
		#	#	#	##################
		#	#	#	#由于政策
		#	#	#	#稳定度
		#	#	#	set_variable = {
		#	#	#		which = ev_ship_stability_because_policy
		#	#	#		value = 0
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_stability_none
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_stability_because_policy
		#	#	#			value = 0
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_stability_low
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_stability_because_policy
		#	#	#			value = 0.03
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_stability_mid
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_stability_because_policy
		#	#	#			value = 0.06
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_stability_high
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_stability_because_policy
		#	#	#			value = 0.09
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_stability_very_high
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_stability_because_policy
		#	#	#			value = 0.12
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_stability_max
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_stability_because_policy
		#	#	#			value = 0.15
		#	#	#		}
		#	#	#	}
		#	#	#	change_variable = {
		#	#	#		which = ev_ship_stability
		#	#	#		value = ev_ship_stability_because_policy
		#	#	#	}
		#	#	#	#由于政策
		#	#	#	#教育
		#	#	#	set_variable = {
		#	#	#		which = ev_ship_education_because_policy
		#	#	#		value = 0
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_education_none
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_education_because_policy
		#	#	#			value = -0.1
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_education_low
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_education_because_policy
		#	#	#			value = -0.05
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_education_mid
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_education_because_policy
		#	#	#			value = 0.02
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_education_high
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_education_because_policy
		#	#	#			value = 0.06
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_education_very_high
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_education_because_policy
		#	#	#			value = 0.1
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_education_max
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_education_because_policy
		#	#	#			value = 0.15
		#	#	#		}
		#	#	#	}
		#	#	#	change_variable = {
		#	#	#		which = ev_ship_education
		#	#	#		value = ev_ship_education_because_policy
		#	#	#	}
		#	#	#	#由于政策
		#	#	#	#发展度
		#	#	#	set_variable = {
		#	#	#		which = ev_ship_development_because_policy
		#	#	#		value = 0
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_development_none
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_development_because_policy
		#	#	#			value = -0.2
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_development_low
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_development_because_policy
		#	#	#			value = -0.1
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_development_mid
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_development_because_policy
		#	#	#			value = 0.02
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_development_high
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_development_because_policy
		#	#	#			value = 0.08
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_development_very_high
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_development_because_policy
		#	#	#			value = 0.15
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			owner = {
		#	#	#				has_policy_flag = ev_he_ship_development_max
		#	#	#			}
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_development_because_policy
		#	#	#			value = 0.25
		#	#	#		}
		#	#	#	}
		#	#	#	change_variable = {
		#	#	#		which = ev_ship_development
		#	#	#		value = ev_ship_development_because_policy
		#	#	#	}
		#	#	#	##################
		#	#	#	#教育度
		#	#	#	#每月基础
		#	#	#	change_variable = {
		#	#	#		which = ev_ship_education
		#	#	#		value = 0.05
		#	#	#	}
		#	#	#	#高教育度1
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			check_variable = {
		#	#	#				which = ev_ship_education
		#	#	#				value >= 40
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_education_for_buff
		#	#	#			value = ev_ship_education
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_education_for_buff
		#	#	#			value = -40
		#	#	#		}
		#	#	#		while = {
		#	#	#			count = ev_ship_education_for_buff
		#	#	#			add_modifier = {
		#	#	#				modifier = ev_hard_core_high_education_buff
		#	#	#				days = 31
		#	#	#			}
		#	#	#		}
		#	#	#	}
		#	#	#	#低教育度
		#	#	#	else = {
		#	#	#		#limit = {
		#	#	#		#	check_variable = {
		#	#	#		#		which = ev_ship_stability
		#	#	#		#		value < 50
		#	#	#		#	}
		#	#	#		#}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_education_for_buff
		#	#	#			value = 40
		#	#	#		}
		#	#	#		subtract_variable = {
		#	#	#			which = ev_ship_education_for_buff
		#	#	#			value = ev_ship_education
		#	#	#		}
		#	#	#		while = {
		#	#	#			count = ev_ship_education_for_buff
		#	#	#			add_modifier = {
		#	#	#				modifier = ev_hard_core_low_education_buff
		#	#	#				days = 31
		#	#	#			}
		#	#	#		}
		#	#	#	}
		#	#	#	#########################
		#	#	#	#发展度
		#	#	#	change_variable = {
		#	#	#		which = ev_ship_development
		#	#	#		value = 0.1
		#	#	#	}
		#	#	#	#因为犯罪度高
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			check_variable = {
		#	#	#				which = ev_ship_crime
		#	#	#				value > 30
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_development_because_crime
		#	#	#			value = 120
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_development_because_crime_50
		#	#	#			value = 50
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_development_because_crime_now_crime_vaule
		#	#	#			value = ev_ship_crime
		#	#	#		}
		#	#	#		subtract_variable = {
		#	#	#			which = ev_ship_development_because_crime
		#	#	#			value = ev_ship_development_because_crime_now_crime_vaule
		#	#	#		}
		#	#	#		divide_variable = {
		#	#	#			which = ev_ship_development_because_crime_50
		#	#	#			value = ev_ship_development_because_crime
		#	#	#		}
		#	#	#		multiply_variable = {
		#	#	#			which = ev_ship_development_because_crime_50
		#	#	#			value = -0.2
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_development
		#	#	#			value = ev_ship_development_because_crime_50
		#	#	#		}
		#	#	#	}
		#	#	#	#高发展度带来的舰队修正
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			check_variable = {
		#	#	#				which = ev_ship_development
		#	#	#				value >= 50
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_development_for_buff
		#	#	#			value = ev_ship_development
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_development_for_buff
		#	#	#			value = -50
		#	#	#		}
		#	#	#		while = {
		#	#	#			count = ev_ship_development_for_buff
		#	#	#			add_modifier = {
		#	#	#				modifier = ev_hard_core_high_development_buff
		#	#	#				days = 31
		#	#	#			}
		#	#	#		}
		#	#	#	}
		#	#	#	##################
		#	#	#	###稳定度
		#	#	#	#每月基础
		#	#	#	change_variable = {
		#	#	#		which = ev_ship_stability
		#	#	#		value = 0
		#	#	#	}
		#	#	#	#因为犯罪度高
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			check_variable = {
		#	#	#				which = ev_ship_crime
		#	#	#				value > 60
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_stability_because_crime
		#	#	#			value = 120
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_stability_because_crime_50
		#	#	#			value = 50
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_stability_because_crime_now_crime_vaule
		#	#	#			value = ev_ship_crime
		#	#	#		}
		#	#	#		subtract_variable = {
		#	#	#			which = ev_ship_stability_because_crime
		#	#	#			value = ev_ship_stability_because_crime_now_crime_vaule
		#	#	#		}
		#	#	#		divide_variable = {
		#	#	#			which = ev_ship_stability_because_crime_50
		#	#	#			value = ev_ship_stability_because_crime
		#	#	#		}
		#	#	#		multiply_variable = {
		#	#	#			which = ev_ship_stability_because_crime_50
		#	#	#			value = -0.15
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_stability
		#	#	#			value = ev_ship_stability_because_crime_50
		#	#	#		}
		#	#	#	}
		#	#	#	#因为教育度高
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			check_variable = {
		#	#	#				which = ev_ship_education
		#	#	#				value > 75
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_stability_because_education
		#	#	#			value = 120
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_stability_because_education_50
		#	#	#			value = 50
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_stability_because_education_now_education_vaule
		#	#	#			value = ev_ship_education
		#	#	#		}
		#	#	#		subtract_variable = {
		#	#	#			which = ev_ship_stability_because_education
		#	#	#			value = ev_ship_stability_because_education_now_education_vaule
		#	#	#		}
		#	#	#		divide_variable = {
		#	#	#			which = ev_ship_stability_because_education_50
		#	#	#			value = ev_ship_stability_because_education
		#	#	#		}
		#	#	#		multiply_variable = {
		#	#	#			which = ev_ship_stability_because_education_50
		#	#	#			value = 0.1
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_stability
		#	#	#			value = ev_ship_stability_because_education_50
		#	#	#		}
		#	#	#		#当大于100时减半
		#	#	#		if = {
		#	#	#			limit = {
		#	#	#				check_variable = {
		#	#	#					which = ev_ship_stability
		#	#	#					value >= 100
		#	#	#				}
		#	#	#			}
		#	#	#			multiply_variable = {
		#	#	#				which = ev_ship_stability_because_education_50
		#	#	#				value = -0.5
		#	#	#			}
		#	#	#			change_variable = {
		#	#	#				which = ev_ship_stability
		#	#	#				value = ev_ship_stability_because_education_50
		#	#	#			}
		#	#	#		}
		#	#	#	}
		#	#	#	#高稳定度
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			check_variable = {
		#	#	#				which = ev_ship_stability
		#	#	#				value >= 50
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_stability_for_buff
		#	#	#			value = ev_ship_stability
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_stability_for_buff
		#	#	#			value = -50
		#	#	#		}
		#	#	#		while = {
		#	#	#			count = ev_ship_stability_for_buff
		#	#	#			add_modifier = {
		#	#	#				modifier = ev_hard_core_high_stability_buff
		#	#	#				days = 31
		#	#	#			}
		#	#	#		}
		#	#	#	}
		#	#	#	#低稳定度
		#	#	#	else = {
		#	#	#		#limit = {
		#	#	#		#	check_variable = {
		#	#	#		#		which = ev_ship_stability
		#	#	#		#		value < 50
		#	#	#		#	}
		#	#	#		#}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_stability_for_buff
		#	#	#			value = 50
		#	#	#		}
		#	#	#		subtract_variable = {
		#	#	#			which = ev_ship_stability_for_buff
		#	#	#			value = ev_ship_stability
		#	#	#		}
		#	#	#		while = {
		#	#	#			count = ev_ship_stability_for_buff
		#	#	#			add_modifier = {
		#	#	#				modifier = ev_hard_core_low_stability_buff
		#	#	#				days = 31
		#	#	#			}
		#	#	#		}
		#	#	#	}
		#	#	#	##################
		#	#	#	###犯罪度
		#	#	#	#每月基础
		#	#	#	change_variable = {
		#	#	#		which = ev_ship_crime
		#	#	#		value = 0
		#	#	#	}
		#	#	#	#因为教育低
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			check_variable = {
		#	#	#				which = ev_ship_education
		#	#	#				value < 60
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_crime_because_education
		#	#	#			value = 60
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_crime_because_education_now_education_vaule
		#	#	#			value = ev_ship_education
		#	#	#		}
		#	#	#		#subtract_variable = {
		#	#	#		#	which = ev_ship_stability_because_crime
		#	#	#		#	value = ev_ship_stability_because_crime_now_crime_vaule
		#	#	#		#}
		#	#	#		divide_variable = {
		#	#	#			which = ev_ship_crime_because_education
		#	#	#			value = ev_ship_crime_because_education_now_education_vaule
		#	#	#		}
		#	#	#		multiply_variable = {
		#	#	#			which = ev_ship_crime_because_education
		#	#	#			value = 0.1
		#	#	#		}
		#	#	#		change_variable = {
		#	#	#			which = ev_ship_crime
		#	#	#			value = ev_ship_crime_because_education
		#	#	#		}
		#	#	#	}
		#	#	#	#禁止超过上限
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			check_variable = {
		#	#	#				which = ev_ship_crime
		#	#	#				value > 100
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_crime
		#	#	#			value = 100
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			check_variable = {
		#	#	#				which = ev_ship_crime
		#	#	#				value < 1
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_crime
		#	#	#			value = 1
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			check_variable = {
		#	#	#				which = ev_ship_education
		#	#	#				value > 100
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_education
		#	#	#			value = 100
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			check_variable = {
		#	#	#				which = ev_ship_education
		#	#	#				value < 1
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_education
		#	#	#			value = 1
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			check_variable = {
		#	#	#				which = ev_ship_development
		#	#	#				value > 100
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_development
		#	#	#			value = 100
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			check_variable = {
		#	#	#				which = ev_ship_development
		#	#	#				value < 1
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_development
		#	#	#			value = 1
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			check_variable = {
		#	#	#				which = ev_ship_stability
		#	#	#				value > 150
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_stability
		#	#	#			value = 150
		#	#	#		}
		#	#	#	}
		#	#	#	if = {
		#	#	#		limit = {
		#	#	#			check_variable = {
		#	#	#				which = ev_ship_stability
		#	#	#				value < 1
		#	#	#			}
		#	#	#		}
		#	#	#		set_variable = {
		#	#	#			which = ev_ship_stability
		#	#	#			value = 1
		#	#	#		}
		#	#	#	}
		#	#	#}
		#	#	#ev_hard_core_var_set = yes
		#	#	#ev_hard_core_var_crime_monthly = yes
		#	#	#ev_hard_core_var_education_monthly = yes
		#	#	#ev_hard_core_var_development_monthly = yes
		#	#	#ev_hard_core_var_stability_monthly = yes
		#	#}
		#	#divide_variable = {
		#	#	which = ev_maintenance_value
		#	#	value = ev_maintenance_value
		#	#}
		#	#change_variable = {
		#	#	which = ev_maintenance_value
		#	#	value = ev_maintenance_value
		#	#}
		#	#斗争度变动
		#	#if = {
		#	#	limit = {
		#	#		check_variable = {
		#	#			which = ev_maintenance_value
		#	#			value <= 0
		#	#		}
		#	#	}
		#	#	change_variable = {
		#	#		which = ev_struggle_value
		#	#		value = 0.015
		#	#	}
		#	#}
		#	#if = {
		#	#	limit = {
		#	#		check_variable = {
		#	#			which = ev_maintenance_value
		#	#			value <= 25
		#	#		}
		#	#	}
		#	#	change_variable = {
		#	#		which = ev_struggle_value
		#	#		value = 0.01
		#	#	}
		#	#}
		#	#if = {
		#	#	limit = {
		#	#		check_variable = {
		#	#			which = ev_maintenance_value
		#	#			value <= 50
		#	#		}
		#	#	}
		#	#	change_variable = {
		#	#		which = ev_struggle_value
		#	#		value = 0.01
		#	#	}
		#	#}
		#	#if = {
		#	#	limit = {
		#	#		check_variable = {
		#	#			which = ev_maintenance_value
		#	#			value > 75
		#	#		}
		#	#	}
		#	#	change_variable = {
		#	#		which = ev_struggle_value
		#	#		value = -0.005
		#	#	}
		#	#}
		#	#if = {
		#	#	limit = {
		#	#		check_variable = {
		#	#			which = ev_maintenance_value
		#	#			value > 90
		#	#		}
		#	#	}
		#	#	change_variable = {
		#	#		which = ev_struggle_value
		#	#		value = -0.005
		#	#	}
		#	#}
		#	#if = {
		#	#	limit = {
		#	#		check_variable = {
		#	#			which = ev_maintenance_value
		#	#			value > 109
		#	#		}
		#	#	}
		#	#	change_variable = {
		#	#		which = ev_struggle_value
		#	#		value = -0.005
		#	#	}
		#	#}
#
#
		#	
		#	#if = {
		#	#	limit = {
		#	#		any_war = {
		#	#			attacker_war_exhaustion > 0.5
		#	#		}
		#	#	}
		#	#	change_variable = {
		#	#		which = ev_struggle_value
		#	#		value = 0.05
		#	#	}
		#	#}
		#	#if = {
		#	#	limit = {
		#	#		any_war = {
		#	#			OR = {
		#	#				attacker_war_exhaustion > 0.9
		#	#				defender_war_exhaustion > 0.9
		#	#			}
		#	#		}
		#	#	}
		#	#	change_variable = {
		#	#		which = ev_struggle_value
		#	#		value = 0.1
		#	#	}
		#	#}
		#	#if = {
		#	#	limit = {
		#	#		check_variable = {
		#	#			which = ev_struggle_value
		#	#			value > 10
		#	#		}
		#	#	}
		#	#	set_variable = {
		#	#		which = ev_struggle_value
		#	#		value = 10
		#	#	}
		#	#}
		#	#if = {
		#	#	limit = {
		#	#		check_variable = {
		#	#			which = ev_struggle_value
		#	#			value < 0
		#	#		}
		#	#	}
		#	#	set_variable = {
		#	#		which = ev_struggle_value
		#	#		value = 0
		#	#	}
		#	#}
		#}
		#every_country = {
		#	limit = {
		#		is_default_ev_country_type = yes
		#	}
		#	
		#}
		#如果有大使船
		#没有民政
		#every_country = {
		#	limit = {
		#		OR = {
		#			is_default_ev_country_type = yes
		#			is_country_type = default
		#		}
		#	}
		#	
		#	add_modifier = {
		#		modifier = ev_ambassador_ship_modifier_1
		#		days = -1
		#	}
#
		#	if = {
		#		limit = {
		#			count_owned_ship = {
		#				limit = {
		#					is_ship_size = ev_ambassador_ship
		#				}
		#				count = 1
		#			}
		#		}
		#		add_modifier = {
		#			modifier = ev_ambassador_ship_modifier_1
		#			days = -1
		#		}
		#	}
		#	if = {
		#		limit = {
		#			count_owned_ship = {
		#				limit = {
		#					is_ship_size = ev_ambassador_ship
		#				}
		#				count = 2
		#			}
		#		}
		#		add_modifier = {
		#			modifier = ev_ambassador_ship_modifier_2
		#			days = -1
		#		}
		#	}
		#	if = {
		#		limit = {
		#			count_owned_ship = {
		#				limit = {
		#					is_ship_size = ev_ambassador_ship
		#				}
		#				count = 3
		#			}
		#		}
		#		add_modifier = {
		#			modifier = ev_ambassador_ship_modifier_3
		#			days = -1
		#		}
		#	}
		#	if = {
		#		limit = {
		#			count_owned_ship = {
		#				limit = {
		#					is_ship_size = ev_ambassador_ship
		#				}
		#				count >= 4
		#			}
		#		}
		#		add_modifier = {
		#			modifier = ev_ambassador_ship_modifier_4
		#			days = -1
		#		}
		#	}
		#}
		#如果有大使船
		#有民政
		#every_country = {
		#	limit = {
		#		OR = {
		#			is_default_ev_country_type = yes
		#			is_country_type = default
		#		}
		#		has_civic = civic_ambassador_ship
		#	}
		#	remove_modifier = ev_ambassador_ship_modifier_1
		#	remove_modifier = ev_ambassador_ship_modifier_2
		#	remove_modifier = ev_ambassador_ship_modifier_3
		#	remove_modifier = ev_ambassador_ship_modifier_4
		#	remove_modifier = ev_ambassador_ship_modifier_1_civic
		#	remove_modifier = ev_ambassador_ship_modifier_2_civic
		#	remove_modifier = ev_ambassador_ship_modifier_3_civic
		#	remove_modifier = ev_ambassador_ship_modifier_4_civic
		#	if = {
		#		limit = {
		#			count_owned_ship = {
		#				limit = {
		#					is_ship_size = ev_ambassador_ship
		#				}
		#				count = 1
		#			}
		#		}
		#		add_modifier = {
		#			modifier = ev_ambassador_ship_modifier_1_civic
		#			days = -1
		#		}
		#	}
		#	if = {
		#		limit = {
		#			count_owned_ship = {
		#				limit = {
		#					is_ship_size = ev_ambassador_ship
		#				}
		#				count = 2
		#			}
		#		}
		#		add_modifier = {
		#			modifier = ev_ambassador_ship_modifier_2_civic
		#			days = -1
		#		}
		#	}
		#	if = {
		#		limit = {
		#			count_owned_ship = {
		#				limit = {
		#					is_ship_size = ev_ambassador_ship
		#				}
		#				count = 3
		#			}
		#		}
		#		add_modifier = {
		#			modifier = ev_ambassador_ship_modifier_3_civic
		#			days = -1
		#		}
		#	}
		#	if = {
		#		limit = {
		#			count_owned_ship = {
		#				limit = {
		#					is_ship_size = ev_ambassador_ship
		#				}
		#				count >= 4
		#			}
		#		}
		#		add_modifier = {
		#			modifier = ev_ambassador_ship_modifier_4_civic
		#			days = -1
		#		}
		#	}
		#}
		#如果有星差号
		#every_country = {
		#	limit = {
		#		OR = {
		#			is_default_ev_country_type = yes
		#			is_country_type = default
		#		}
		#	}
		#	
		#}
		#维持度检测
		#every_country = {
		#	#根据附庸给加成
		#	if = {
		#		limit = {
		#			has_origin = origin_ev_subjects_owner
		#			NOT = {
		#				has_ascension_perk = ev_land_planets
		#			}
		#			NOT = {
		#				has_ascension_perk = ev_become_da_khan
		#			}
		#		}
		#		set_variable = {
		#			which = ev_subject_num
		#			value = 0
		#		}
		#		every_subject = {
		#			prev = {
		#				change_variable = {
		#					which = ev_subject_num
		#					value = 1
		#				}
		#			}
		#		}
		#		ev_give_subject_owner_buff = yes
		#	}
		#	if = {
		#		limit = {
		#			#is_default_ev_country_type = yes
		#			always = yes
		#		}
		#		#补给船的buff
		#		#ev_give_fleet_ship_buff = yes
		#		ev_give_fleet_ship_buff_new = yes
		#		
		#	}
		#	
		#	#维持度变动
		#	#remove_ev_maintenance_buff = yes
		#	if = {
		#		limit = {
		#			is_default_ev_country_type = yes
		#			NOR = {
		#				has_authority = auth_machine_intelligence
		#				has_authority = auth_hive_mind
		#			}
		#		}
		#		save_event_target_as = default_ev_country_need_maintenance
		#		maintenance_change_var_new = yes
		#		#目前变量乘以修正只能生效在舰船范围-3.0版本 - 2021-4-18
#
		#		#当前变量支持修正乘以国家范围，故废弃-3.1版本 2021-9-15
		#		
		#		#give_test_ev_maintenance = yes
#
		#		#remove_ev_maintenance_buff = yes				#去除之前的维持度buff
		#		#maintenance_change_var = yes				#计算维持度变动
		#		#if = {
		#		#	limit = {
		#		#		has_valid_civic = civic_ev_maintenance_add
		#		#	}
		#		#	multiply_variable = {
		#		#		which = ev_maintenance_value_base
		#		#		value = 3
		#		#	}
		#		#}
		#		#change_variable = {
		#		#	which = ev_maintenance_value
		#		#	value = ev_maintenance_value_edicts
		#		#}
		#		#change_variable = {
		#		#	which = ev_maintenance_value
		#		#	value = ev_maintenance_value_base
		#		#}
		#		#change_variable = {
		#		#	which = ev_maintenance_value
		#		#	value = ev_maintenance_value_policy
		#		#}
		#		#give_ev_maintenance_buff = yes				#获得新的维持度buff
		#		##基础增加
		#		#if = {
		#		#	limit = {
		#		#		has_valid_civic = civic_ev_maintenance_add
		#		#		check_variable = {
		#		#			which = ev_maintenance_value
		#		#			value <= 15
		#		#		}
		#		#	}
		#		#	set_variable = {
		#		#		which = ev_maintenance_value
		#		#		value = 15
		#		#	}
		#		#	remove_ev_maintenance_buff = yes
		#		#	give_ev_maintenance_buff = yes
		#		#}
		#		##科技上限
		#		#if = {
		#		#	limit = {
		#		#		has_technology = tech_ev_maintenance_1
		#		#		has_technology = tech_ev_maintenance_2
		#		#	}
		#		#	remove_ev_maintenance_buff = yes
		#		#	give_ev_maintenance_buff = yes
		#		#}
		#		#else_if = {
		#		#	limit = {
		#		#		check_variable = {
		#		#			which = ev_maintenance_value
		#		#			value > 95
		#		#		}
		#		#		OR = {
		#		#			has_technology = tech_ev_maintenance_1
		#		#			has_technology = tech_ev_maintenance_2
		#		#		}
		#		#	}
		#		#	set_variable = {
		#		#		which = ev_maintenance_value
		#		#		value = 95
		#		#	}
		#		#	remove_ev_maintenance_buff = yes
		#		#	give_ev_maintenance_buff = yes
		#		#}
		#		#else_if = {
		#		#	limit = {
		#		#		check_variable = {
		#		#			which = ev_maintenance_value
		#		#			value > 80
		#		#		}
		#		#		NOR = {
		#		#			has_technology = tech_ev_maintenance_1
		#		#			has_technology = tech_ev_maintenance_2
		#		#		}
		#		#	}
		#		#	set_variable = {
		#		#		which = ev_maintenance_value
		#		#		value = 80
		#		#	}
		#		#	remove_ev_maintenance_buff = yes
		#		#	give_ev_maintenance_buff = yes
		#		#}
		#	}
		#	else = {
		#		end_event_chain = "ev_maintenance_chain"
		#	}
		#}
	}
}

#年检查，查看维持度的特殊项目
event = {
	id = ev_maintenance.2
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_country = {
			end_event_chain = "ev_maintenance_chain"
			if = {
				limit = {
					is_default_ev_country_type = yes
					NOR = {
						has_authority = auth_machine_intelligence
						has_authority = auth_hive_mind
					}
				}
				save_event_target_as = default_ev_country_need_maintenance
				begin_event_chain = {
					event_chain = "ev_maintenance_chain"
					target = event_target:default_ev_country_need_maintenance
				}
			}
		}


		every_country = {
			limit = {
				is_country_type = enclave_mercenary 
			}
			#set_variable = {
			#	which = ev_enclave_cap_var_buff_num
			#	value = value:ev_enclave_cap_var
			#}
			every_owned_fleet = {
				limit = {
					NOT = {
						has_fleet_flag = has_ev_enclave_fleet_cap_in_fleet_va
					}
				}
				set_variable = {
					which = ev_enclave_cap_var_buff_num
					value = owner.value:ev_enclave_cap_var
				}
				add_modifier = {
					modifier = ev_enclave_fleet_cap_in_fleet_var 
					multiplier = ev_enclave_cap_var_buff_num  #value:owner.ev_enclave_cap_var
				}
				set_fleet_flag = has_ev_enclave_fleet_cap_in_fleet_var
			}
		}
	}
}

#维持度事件,年检测
#旧版
#event = {
#	id = ev_maintenance.10
#	hide_window = yes
#	is_triggered_only = yes
#	
#	trigger = {
#		years_passed > 12
#		
#	}
#	
#	immediate = {
#		
#		every_country = {
#			limit = { 
#				is_default_ev_country_type = yes 
#				NOT = { is_country_type = fallen_empire_ev }
#				is_ai = no
#			}
#			if = {
#				limit = { 
#					NOR = {
#						has_authority = auth_machine_intelligence
#						has_authority = auth_hive_mind
#					}
#				}
#				#舰船维护事件
#				random_list = {
#					1 = { 
#						modifier = {
#							factor = 2
#							mid_game_years_passed > 10
#						}
#						modifier = {
#							factor = 2
#							end_game_years_passed > 10
#						}
#						random_controlled_ship = {
#							limit = {
#								is_ship_size = homeless_ship
#							}
#							ship_event = { id = ev_maintenance.150 days = 1 random = 355 }
#						}
#					}
#					6 = {}
#				}
#				if = {
#					limit = { 
#						AND = {
#							check_variable = {
#								which = ev_maintenance_value
#								value > 70
#							}
#							#check_variable = {
#							#	which = ev_maintenance_value
#							#	value <= 100
#							#}
#						}
#					}
#					random_list = {
#						2 = { country_event = { id = ev_maintenance.100 days = 1 random = 340 } }
#						1 = { country_event = { id = ev_maintenance.101 days = 1 random = 340 } }
#						1 = { country_event = { id = ev_maintenance.102 days = 1 random = 340 } }
#						1 = { country_event = { id = ev_maintenance.103 days = 1 random = 340 } }
#						4 = {}
#					}
#					if = {
#						limit = {
#							years_passed > 60
#						}
#						random_list = {
#							2 = { country_event = { id = ev_maintenance.100 days = 1 random = 340 } }
#							1 = { country_event = { id = ev_maintenance.101 days = 1 random = 340 } }
#							1 = { country_event = { id = ev_maintenance.102 days = 1 random = 340 } }
#							1 = { country_event = { id = ev_maintenance.103 days = 1 random = 340 } }
#							4 = {}
#						}
#					}
#					if = {
#						limit = {
#							end_game_years_passed > 0
#						}
#						random_list = {
#							2 = { country_event = { id = ev_maintenance.100 days = 1 random = 340 } }
#							1 = { country_event = { id = ev_maintenance.101 days = 1 random = 340 } }
#							1 = { country_event = { id = ev_maintenance.102 days = 1 random = 340 } }
#							1 = { country_event = { id = ev_maintenance.103 days = 1 random = 340 } }
#						}
#					}
#				}
#				else_if = {
#					limit = {
#						AND = {
#							check_variable = {
#								which = ev_maintenance_value
#								value > 20
#							}
#							check_variable = {
#								which = ev_maintenance_value
#								value <= 70
#							}
#						}
#					}
#					random_list = {
#						2 = { country_event = { id = ev_maintenance.110 days = 1 random = 340 } }
#						2 = { country_event = { id = ev_maintenance.111 days = 1 random = 340 } }
#						2 = { country_event = { id = ev_maintenance.112 days = 1 random = 340 } }
#						2 = { country_event = { id = ev_maintenance.113 days = 1 random = 340 } }
#						8 = {}
#					}
#					if = {
#						limit = {
#							years_passed > 60
#						}
#						random_list = {
#							2 = { country_event = { id = ev_maintenance.110 days = 1 random = 340 } }
#							2 = { country_event = { id = ev_maintenance.111 days = 1 random = 340 } }
#							2 = { country_event = { id = ev_maintenance.112 days = 1 random = 340 } }
#							2 = { country_event = { id = ev_maintenance.113 days = 1 random = 340 } }
#							8 = {}
#						}
#					}
#					if = {
#						limit = {
#							end_game_years_passed > 0
#						}
#						random_list = {
#							2 = { country_event = { id = ev_maintenance.100 days = 1 random = 340 } }
#							1 = { country_event = { id = ev_maintenance.101 days = 1 random = 340 } }
#							1 = { country_event = { id = ev_maintenance.102 days = 1 random = 340 } }
#							1 = { country_event = { id = ev_maintenance.103 days = 1 random = 340 } }
#						}
#					}
#				}			
#				else_if = {
#					limit = {
#						AND = {
#							check_variable = {
#								which = ev_maintenance_value
#								value <= 20
#							}
#						}
#					}
#					random_list = {
#						2 = { country_event = { id = ev_maintenance.120 days = 1 random = 340 } }
#						3 = { country_event = { id = ev_maintenance.121 days = 1 random = 340 } }
#						4 = { country_event = { id = ev_maintenance.122 days = 1 random = 340 } }
#						2 = { country_event = { id = ev_maintenance.123 days = 1 random = 340 } }
#						10 = {}
#					}
#					if = {
#						limit = {
#							years_passed > 60
#						}
#						random_list = {
#							2 = { country_event = { id = ev_maintenance.120 days = 1 random = 340 } }
#							3 = { country_event = { id = ev_maintenance.121 days = 1 random = 340 } }
#							4 = { country_event = { id = ev_maintenance.122 days = 1 random = 340 } }
#							2 = { country_event = { id = ev_maintenance.123 days = 1 random = 340 } }
#							10 = {}
#						}
#					}
#					if = {
#						limit = {
#							end_game_years_passed > 0
#						}
#						random_list = {
#							2 = { country_event = { id = ev_maintenance.100 days = 1 random = 340 } }
#							1 = { country_event = { id = ev_maintenance.101 days = 1 random = 340 } }
#							1 = { country_event = { id = ev_maintenance.102 days = 1 random = 340 } }
#							1 = { country_event = { id = ev_maintenance.103 days = 1 random = 340 } }
#						}
#					}
#				}
#				else = {
#					random_list = {
#						1 = { country_event = { id = ev_maintenance.123 days = 1 random = 340 } }
#						3 = {}
#					}
#					if = {
#						limit = {
#							end_game_years_passed > 0
#						}
#						while = {
#							count = 1
#							random_list = {
#								2 = { country_event = { id = ev_maintenance.120 days = 1 random = 340 } }
#								1 = { country_event = { id = ev_maintenance.121 days = 1 random = 340 } }
#								1 = { country_event = { id = ev_maintenance.122 days = 1 random = 340 } }
#								1 = { country_event = { id = ev_maintenance.123 days = 1 random = 340 } }
#							}
#						}
#						
#					}
#				}
#			}
#			
#		}
#	}		
#}


#每月判定和生成
event = {
	id = ev_maintenance.10
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_country = {
			limit = {
				is_default_ev_country_type = yes
			}
			#获取资源数量
			#export_resource_income_to_variable = {
			#	resource = manpower
			#	variable = ev_manpower_income
			#}
			#export_resource_stockpile_to_variable = {
			#	resource = manpower
			#	variable = ev_manpower_stockpile
			#}

			#附庸国
			if = {
				limit = {
					has_origin = origin_ev_subjects_owner
					#is_default_ev_country_type = yes
					#NOT = {
					#	has_ascension_perk = ev_land_planets
					#}
					#NOT = {
					#	has_ascension_perk = ev_become_da_khan
					#}
					#
				}
				set_variable = {
					which = ev_subject_num
					value = 0
				}
				every_subject = {
					
					prev = {
						change_variable = {
							which = ev_subject_num
							value = 1
						}
					}
				}
				#save_event_target_as = ev_subjects_owner
				remove_modifier = ev_give_subject_owner_modifier_var 
				add_modifier = {
					modifier = ev_give_subject_owner_modifier_var 
					mult = ev_subject_num
					days = -1
				}
				#ev_give_subject_owner_buff = yes
			}
			#补给船的buff
			ev_give_fleet_ship_buff_new = yes

			
		}
		
	}
}


#当一个船被造
ship_event = {
	id = ev_maintenance.20
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		OR = {
			is_ship_size = private_homeless_ship
			is_ship_size = private_homeless_ship_starbase
			is_ship_size = homeless_ship
			is_ship_size = homeless_ship_starbase
			is_ship_size = megastructures_homeless_ship
			
		}
	}
	immediate = {
		#建造时，由于有civic_ev_homeless_ship
		if = {
			limit = { 
				owner = {
					has_civic = civic_ev_homeless_ship
				}
				OR = {
					is_ship_size = private_homeless_ship
					is_ship_size = homeless_ship
				}
			}
			random_list = {
				5 = {
					modifier = {
						add = owner.value:ev_count_councilor_ev_homeless_ship_level
					}
					modifier = {
						add = owner.value:ev_count_councilor_gestalt_regulatory_level
					}
					create_fleet = {
						effect = {
							set_owner = root.owner
							while = {
								count = 1
								create_ship = {
									name = random
									random_existing_design = homeless_ship
								}
							}
							set_fleet_stance = evasive
							set_location = root
						}
					}
					owner = {
						country_event = { id = ev_maintenance.600 }
					}
					
				}
				95 = {}
			}

			random_list = {
				1 = { 
					owner = {
						add_monthly_resource_mult = {
							resource = alloys
							value = 2
						}
					}
				}
				1 = { }
			}
		}


		#建造时减少维持度
		if = {
			limit = {
				root = {
					OR = {
						is_ship_size = private_homeless_ship
						is_ship_size = homeless_ship
					}
				}
			}
			root.owner = {
				change_variable = { which = ev_maintenance_value value = -5 }
			}
		}
		else_if = {
			limit = {
				root = {
					OR = {
						is_ship_size = private_homeless_ship_starbase
						is_ship_size = homeless_ship_starbase
					}
				}
			}
			root.owner = {
				change_variable = { which = ev_maintenance_value value = -5 }
			}
		}
		else_if = {
			limit = {
				root = {
					OR = {
						is_ship_size = megastructures_homeless_ship
					}
				}
			}
			root.owner = {
				change_variable = { which = ev_maintenance_value value = -15 }
			}
		}
		
		
		#set_variable = {
		#	which = ev_ship_stability
		#	value = 50
		#}
		#set_variable = {
		#	which = ev_ship_development
		#	value = 10
		#}
		#set_variable = {
		#	which = ev_ship_education
		#	value = 40
		#}
		#set_variable = {
		#	which = ev_ship_crime
		#	value = 0
		#}
	}
}
#

#当一个船被造,陆军船-转换陆军
ship_event = {
	id = ev_maintenance.30
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		AND = {
			is_ship_size = ev_army_ship
			has_component = EV_ARMY_CORE_1
		}
	}
	immediate = {
		save_event_target_as = ev_onwer_amry_ship_location
		create_fleet = {
			effect = {
				set_owner = root.owner
				create_army_transport = {
					ship_name = random
					graphical_culture = empty_vagrant_01
					army_type = "ev_assault_army"
				}
				set_location = {
					target = event_target:ev_onwer_amry_ship_location
					distance = 1
					angle = random
				}
			}
		}
		root = {
			delete_ship = this
		}
	}
}
ship_event = {
	id = ev_maintenance.31
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		AND = {
			is_ship_size = ev_army_ship
			has_component = EV_ARMY_CORE_2
		}
	}
	immediate = {
		save_event_target_as = ev_onwer_amry_ship_location
		create_fleet = {
			effect = {
				set_owner = root.owner
				create_army_transport = {
					ship_name = random
					graphical_culture = empty_vagrant_01
					army_type = ev_da_khan_assault_army
				}
				set_location = {
					target = event_target:ev_onwer_amry_ship_location
					distance = 1
					angle = random
				}
			}
		}
		root = {
			delete_ship = this
		}
	}
}
ship_event = {
	id = ev_maintenance.32
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		AND = {
			is_ship_size = ev_army_ship
			has_component = EV_ARMY_CORE_3
		}
	}
	immediate = {
		save_event_target_as = ev_onwer_amry_ship_location
		create_fleet = {
			effect = {
				set_owner = root.owner
				create_army_transport = {
					ship_name = random
					graphical_culture = empty_vagrant_01
					army_type = robotic_army
				}
				set_location = {
					target = event_target:ev_onwer_amry_ship_location
					distance = 1
					angle = random
				}
			}
		}
		root = {
			delete_ship = this
		}
	}
}
ship_event = {
	id = ev_maintenance.33
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		AND = {
			is_ship_size = ev_army_ship
			has_component = EV_ARMY_CORE_4
		}
	}
	immediate = {
		save_event_target_as = ev_onwer_amry_ship_location
		create_fleet = {
			effect = {
				set_owner = root.owner
				create_army_transport = {
					ship_name = random
					graphical_culture = empty_vagrant_01
					army_type = psionic_army
				}
				set_location = {
					target = event_target:ev_onwer_amry_ship_location
					distance = 1
					angle = random
				}
			}
		}
		root = {
			delete_ship = this
		}
	}
}
ship_event = {
	id = ev_maintenance.34
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		AND = {
			is_ship_size = ev_army_ship
			has_component = EV_ARMY_CORE_5
		}
	}
	immediate = {
		save_event_target_as = ev_onwer_amry_ship_location
		create_fleet = {
			effect = {
				set_owner = root.owner
				create_army_transport = {
					ship_name = random
					graphical_culture = empty_vagrant_01
					army_type = xenomorph_army
				}
				set_location = {
					target = event_target:ev_onwer_amry_ship_location
					distance = 1
					angle = random
				}
			}
		}
		root = {
			delete_ship = this
		}
	}
}
ship_event = {
	id = ev_maintenance.35
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		AND = {
			is_ship_size = ev_army_ship
			has_component = EV_ARMY_CORE_6
		}
	}
	immediate = {
		save_event_target_as = ev_onwer_amry_ship_location
		create_fleet = {
			effect = {
				set_owner = root.owner
				create_army_transport = {
					ship_name = random
					graphical_culture = empty_vagrant_01
					army_type = gene_warrior_army
				}
				set_location = {
					target = event_target:ev_onwer_amry_ship_location
					distance = 1
					angle = random
				}
			}
		}
		root = {
			delete_ship = this
		}
	}
}
ship_event = {
	id = ev_maintenance.36
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		AND = {
			is_ship_size = ev_army_ship
			has_component = EV_ARMY_CORE_7
		}
	}
	immediate = {
		save_event_target_as = ev_onwer_amry_ship_location
		create_fleet = {
			effect = {
				set_owner = root.owner
				create_army_transport = {
					ship_name = random
					graphical_culture = empty_vagrant_01
					army_type = machine_assault_2
				}
				set_location = {
					target = event_target:ev_onwer_amry_ship_location
					distance = 1
					angle = random
				}
			}
		}
		root = {
			delete_ship = this
		}
	}
}
ship_event = {
	id = ev_maintenance.37
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		AND = {
			is_ship_size = ev_army_ship
			has_component = EV_ARMY_CORE_8
		}
	}
	immediate = {
		save_event_target_as = ev_onwer_amry_ship_location
		create_fleet = {
			effect = {
				set_owner = root.owner
				create_army_transport = {
					ship_name = random
					graphical_culture = empty_vagrant_01
					army_type = machine_assault_3
				}
				set_location = {
					target = event_target:ev_onwer_amry_ship_location
					distance = 1
					angle = random
				}
			}
		}
		root = {
			delete_ship = this
		}
	}
}
ship_event = {
	id = ev_maintenance.38
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		AND = {
			is_ship_size = ev_army_ship
			has_component = EV_ARMY_CORE_9
		}
	}
	immediate = {
		save_event_target_as = ev_onwer_amry_ship_location
		create_fleet = {
			effect = {
				set_owner = root.owner
				create_army_transport = {
					ship_name = random
					graphical_culture = empty_vagrant_01
					army_type = slave_army
				}
				set_location = {
					target = event_target:ev_onwer_amry_ship_location
					distance = 1
					angle = random
				}
			}
		}
		root = {
			delete_ship = this
		}
	}
}
#clone_army
ship_event = {
	id = ev_maintenance.39
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		AND = {
			is_ship_size = ev_army_ship
			has_component = EV_ARMY_CORE_12
		}
	}
	immediate = {
		save_event_target_as = ev_onwer_amry_ship_location
		create_fleet = {
			effect = {
				set_owner = root.owner
				create_army_transport = {
					ship_name = random
					graphical_culture = empty_vagrant_01
					army_type = clone_army
				}
				set_location = {
					target = event_target:ev_onwer_amry_ship_location
					distance = 1
					angle = random
				}
			}
		}
		root = {
			delete_ship = this
		}
	}
}

#虚空之母圣教军
ship_event = {
	id = ev_maintenance.40
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		AND = {
			is_ship_size = ev_army_ship
			has_component = EV_ARMY_CORE_13
		}
	}
	immediate = {
		save_event_target_as = ev_onwer_amry_ship_location
		create_fleet = {
			effect = {
				set_owner = root.owner
				create_army_transport = {
					ship_name = random
					graphical_culture = empty_vagrant_01
					army_type = ev_void_army
				}
				set_location = {
					target = event_target:ev_onwer_amry_ship_location
					distance = 1
					angle = random
				}
			}
		}
		root = {
			delete_ship = this
		}
	}
}


#自爆家园舰被建造
ship_event = {
	id = ev_maintenance.50
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		AND = {
			owner = { has_civic = civic_ev_boom_homeless }
			#is_ship_size = ev_army_ship
			OR = {
				is_ship_size = homeless_ship
				is_ship_size = homeless_ship_starbase
			}
		}
	}
	immediate = {
		add_modifier = {
			modifier = civic_ev_boom_homeless_ship_modifier
			multiplier = 1
		}
		ship_event = { #25 - 35 
			id = ev_maintenance.51 days = 9000 random = 3600
		}
	}
}

#自爆家园舰被建造-20年后
ship_event = {
	id = ev_maintenance.51
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		always = yes
	}
	immediate = {
		owner = {
			country_event = {
				id = ev_maintenance.52
			}
		}
		destroy_ship = root
	}
}

country_event = {
	id = ev_maintenance.52
	title = "ev_maintenance.52.title"
	desc = ev_maintenance.52.desc
	picture = GFX_evt_ship_in_orbit_2
	#	hide_window = yes
	location = from
	#trackable = yes
	is_triggered_only = yes
	trigger = {
		
	}
	after = {
		
	}
	option = {
		name = OK
		
	}
}


country_event = {
	id = ev_maintenance.100
	title = "ev_maintenance.100.title"
	desc = {
		text = ev_maintenance.100.desc.1
	}
	desc = {
		text = ev_maintenance.100.desc.2
	}
	desc = {
		text = ev_maintenance.100.desc.3
	}
	picture = GFX_evt_space_station
	#	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_country_flag = ev_trigger_maintenance_100
		}
	}
	after = {
		set_timed_country_flag = {
			flag = ev_trigger_maintenance_100 days = 1800
		}
	}
	option = {
		name = ev_maintenance.100.a
		allow = {
			#resource_stockpile_compare = {
			#	resource = energy
			#	value >= 5000
			#}
			#resource_stockpile_compare = {
			#	resource = alloys
			#	value >= 1000
			#}
		}
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = 5
			}
		}
		add_monthly_resource_mult = {
			resource = energy
			max = -1000
			value = -6
		}
		locked_random_list = {
			1 = {
				add_monthly_resource_mult = {
					resource = energy
					max = -800
					value = -7
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = alloys
					max = -500
					value = -7
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = minerals
					max = -800
					value = -7
				}
			}
		}
	}
	option = {
		name = ev_maintenance.100.b
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = -4
			}
		}
	}
	option = {
		name = ev_maintenance.100.c
		trigger = {
			has_civic = civic_ev_police_ship
		}
		ai_chance = {
			factor = 10
		}
		add_monthly_resource_mult = {
			resource = energy
			max = -100
			value = -1
		}
	}
}

country_event = {
	id = ev_maintenance.101
	title = "ev_maintenance.101.title"
	desc = {
		text = ev_maintenance.101.desc.1
	}
	desc = {
		text = ev_maintenance.101.desc.2
	}
	desc = {
		text = ev_maintenance.101.desc.3
	}
	picture = GFX_evt_galactic_senate
	is_triggered_only = yes
	option = {
		name = ev_maintenance.101.a
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value >= 100
			}
		}
		add_resource = {
			influence = -100
		}
		add_monthly_resource_mult = {
			resource = energy
			value = -10
		}
		locked_random_list = {
			1 = {
				add_monthly_resource_mult = {
					resource = energy
					max = -800
					value = -7
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = alloys
					max = -500
					value = -7
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = minerals
					max = -800
					value = -7
				}
			}
		}
		change_variable = {
			which = ev_maintenance_value
			value = 10
		}
	}
	option = {
		name = ev_maintenance.101.b
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value >= 70
			}
		}
		add_resource = {
			influence = -70
		}
		add_monthly_resource_mult = {
			resource = energy
			value = -5
		}
		add_monthly_resource_mult = {
			resource = alloys
			value = -4
		}
		change_variable = {
			which = ev_maintenance_value
			value = 0.5
		}
	}
	option = {
		name = ev_maintenance.101.c
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = -5
			}
		}
	}
	option = {
		name = ev_maintenance.101.d
		trigger = {
			has_civic = civic_ev_police_ship
		}
		add_resource = {
			influence = -10
		}
		add_monthly_resource_mult = {
			resource = energy
			max = -100
			value = -1
		}
	}
}

country_event = {
	id = ev_maintenance.102
	title = "ev_maintenance.102.title"
	desc = {
		text = ev_maintenance.102.desc.1
	}
	desc = {
		text = ev_maintenance.102.desc.2
	}
	desc = {
		text = ev_maintenance.102.desc.3
	}
	picture = GFX_evt_alien_propaganda
	is_triggered_only = yes
	option = {
		name = ev_maintenance.112.a
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value >= 4000
			}
		}
		owner = {
			add_resource = {
				energy = -4000
			}
		}
		locked_random_list = {
			1 = {
				add_monthly_resource_mult = {
					resource = energy
					max = -800
					value = -7
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = alloys
					max = -500
					value = -7
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = minerals
					max = -800
					value = -7
				}
			}
		}
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = 10
			}
		}
	}
	option = {
		name = ev_maintenance.112.b
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value >= 80
			}
		}
		owner = {
			add_resource = {
				influence = -80
			}
		}
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = 5
			}
		}
	}
	option = {
		name = ev_maintenance.112.c
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = -4
			}
		}
	}
	option = {
		name = ev_maintenance.112.d
		trigger = {
			has_civic = civic_ev_police_ship
		}
		ai_chance = {
			factor = 10
		}
		add_resource = {
			influence = -10
		}
		add_monthly_resource_mult = {
			resource = energy
			max = -200
			value = -1
		}
	}
}

country_event = {
	id = ev_maintenance.103
	title = "ev_maintenance.103.title"
	desc = {
		text = ev_maintenance.103.desc.1
	}
	desc = {
		text = ev_maintenance.103.desc.2
	}
	desc = {
		text = ev_maintenance.103.desc.3
	}
	desc = {
		text = ev_maintenance.103.desc.4
	}
	picture = GFX_evt_exploding_ship
	is_triggered_only = yes
	option = {
		name = ev_maintenance.103.a
		if = {
			limit = {
				OR = {
					has_authority = auth_machine_intelligence
					has_authority = auth_hive_mind
				}
			}
			owner = {
				add_resource = {
					energy = -500
				}
			}
		}
		else = {
			#owner = {
			#	add_resource = {
			#		manpower = -50
			#	}
			#}
		}
		locked_random_list = {
			1 = {
				add_monthly_resource_mult = {
					resource = energy
					max = -200
					value = -4
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = food
					max = -800
					value = -4
				}
			}
		}
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = -5
			}
		}
	}
	option = {
		name = ev_maintenance.103.b
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value >= 1400
			}
		}
		if = {
			limit = {
				OR = {
					has_authority = auth_machine_intelligence
					has_authority = auth_hive_mind
				}
			}
			owner = {
				add_resource = {
					energy = -500
				}
			}
		}
		else = {
			#owner = {
			#	add_resource = {
			#		manpower = -50
			#	}
			#}
		}
		add_monthly_resource_mult = {
			resource = energy
			max = -500
			value = -6
		}
		locked_random_list = {
			1 = {
				add_monthly_resource_mult = {
					resource = energy
					max = -200
					value = -7
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = food
					max = -800
					value = -7
				}
			}
		}
		owner = {
			add_resource = {
				energy = -1400
			}
		}
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = 0
			}
		}
	}
	option = {
		name = ev_maintenance.103.c
		trigger = {
			has_civic = civic_ev_police_ship
		}
		ai_chance = {
			factor = 10
		}
		add_resource = {
			influence = -10
		}
	}
}

country_event = {
	id = ev_maintenance.110
	title = "ev_maintenance.100.title"
	desc = {
		text = ev_maintenance.100.desc.1
	}
	desc = {
		text = ev_maintenance.100.desc.2
	}
	desc = {
		text = ev_maintenance.100.desc.3
	}
	picture = GFX_evt_space_station
	#	hide_window = yes
	is_triggered_only = yes
	option = {
		name = ev_maintenance.110.a
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value >= 1250
			}
		}
		owner = {
			add_resource = {
				energy = -1250
			}
		}
		add_monthly_resource_mult = {
			resource = energy
			max = -500
			value = -5
		}
		locked_random_list = {
			1 = {
				add_monthly_resource_mult = {
					resource = energy
					max = -800
					value = -4
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = alloys
					max = -500
					value = -4
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = minerals
					max = -800
					value = -4
				}
			}
		}
	}
	option = {
		name = ev_maintenance.110.b
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = -2
			}
		}
	}
	option = {
		name = ev_maintenance.110.c
		trigger = {
			has_civic = civic_ev_police_ship
		}
		ai_chance = {
			factor = 10
		}
		add_monthly_resource_mult = {
			resource = energy
			max = -100
			value = -1
		}
	}
}

country_event = {
	id = ev_maintenance.111
	title = "ev_maintenance.101.title"
	desc = {
		text = ev_maintenance.101.desc.1
	}
	desc = {
		text = ev_maintenance.101.desc.2
	}
	desc = {
		text = ev_maintenance.101.desc.3
	}
	picture = GFX_evt_galactic_senate
	is_triggered_only = yes
	option = {
		name = ev_maintenance.111.a
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value >= 80
			}
		}
		add_resource = {
			influence = -80
		}
		change_variable = {
			which = ev_maintenance_value
			value = 3
		}
	}
	option = {
		name = ev_maintenance.111.b
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value >= 40
			}
		}
		add_resource = {
			influence = -40
		}
		change_variable = {
			which = ev_maintenance_value
			value = 1
		}
	}
	option = {
		name = ev_maintenance.111.c
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = -2
			}
		}
	}
	option = {
		name = ev_maintenance.101.d
		trigger = {
			has_civic = civic_ev_police_ship
		}
		ai_chance = {
			factor = 10
		}
		add_resource = {
			influence = -10
		}
		add_monthly_resource_mult = {
			resource = energy
			max = -100
			value = -1
		}
	}
}

country_event = {
	id = ev_maintenance.112
	title = "ev_maintenance.102.title"
	desc = {
		text = ev_maintenance.102.desc.1
	}
	desc = {
		text = ev_maintenance.102.desc.2
	}
	desc = {
		text = ev_maintenance.102.desc.3
	}
	picture = GFX_evt_alien_propaganda
	is_triggered_only = yes
	option = {
		name = ev_maintenance.112.a
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value >= 1500
			}
		}
		add_monthly_resource_mult = {
			resource = energy
			max = -400
			value = -4
		}
		locked_random_list = {
			1 = {
				add_monthly_resource_mult = {
					resource = energy
					max = -400
					value = -3
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = alloys
					max = -300
					value = -3
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = minerals
					max = -400
					value = -3
				}
			}
		}
		owner = {
			add_resource = {
				energy = -1500
			}
		}
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = 3
			}
		}
	}
	option = {
		name = ev_maintenance.112.b
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value >= 100
			}
		}
		owner = {
			add_resource = {
				energy = -100
			}
		}
		locked_random_list = {
			1 = {
				add_monthly_resource_mult = {
					resource = energy
					max = -300
					value = -2
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = alloys
					max = -200
					value = -2
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = minerals
					max = -200
					value = -2
				}
			}
		}
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = -2
			}
		}
	}
	option = {
		name = ev_maintenance.112.d
		trigger = {
			has_civic = civic_ev_police_ship
		}
		ai_chance = {
			factor = 10
		}
		add_resource = {
			influence = -10
		}
		add_monthly_resource_mult = {
			resource = energy
			max = -100
			value = -1
		}
	}
}

country_event = {
	id = ev_maintenance.113
	title = "ev_maintenance.103.title"
	desc = {
		text = ev_maintenance.103.desc.1
	}
	desc = {
		text = ev_maintenance.103.desc.2
	}
	desc = {
		text = ev_maintenance.103.desc.3
	}
	desc = {
		text = ev_maintenance.103.desc.4
	}
	picture = GFX_evt_exploding_ship
	is_triggered_only = yes
	option = {
		name = ev_maintenance.103.a
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = -2
			}
		}
	}
	option = {
		name = ev_maintenance.103.b
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value >= 750
			}
		}
		owner = {
			add_resource = {
				energy = -750
			}
		}
		locked_random_list = {
			1 = {
				add_monthly_resource_mult = {
					resource = energy
					max = -400
					value = -3
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = minerals
					max = -400
					value = -3
				}
			}
		}
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = -1
			}
		}
	}
	option = {
		name = ev_maintenance.103.c
		trigger = {
			has_civic = civic_ev_police_ship
		}
		ai_chance = {
			factor = 10
		}
		add_resource = {
			influence = -10
		}
	}
}

country_event = {
	id = ev_maintenance.120
	title = "ev_maintenance.100.title"
	desc = {
		text = ev_maintenance.100.desc.1
	}
	desc = {
		text = ev_maintenance.100.desc.2
	}
	desc = {
		text = ev_maintenance.100.desc.3
	}
	picture = GFX_evt_space_station
	#	hide_window = yes
	is_triggered_only = yes
	option = {
		name = ev_maintenance.110.a
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value >= 1000
			}
		}
		locked_random_list = {
			1 = {
				add_monthly_resource_mult = {
					resource = alloys
					max = -300
					value = -3
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = minerals
					max = -400
					value = -3
				}
			}
		}
		owner = {
			add_resource = {
				energy = -1000
			}
		}
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = 1
			}
		}
	}
	option = {
		name = ev_maintenance.110.b
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = -2
			}
		}
	}
	option = {
		name = ev_maintenance.110.c
		trigger = {
			has_civic = civic_ev_police_ship
		}
		ai_chance = {
			factor = 10
		}
		add_monthly_resource_mult = {
			resource = energy
			max = -100
			value = -1
		}
	}
}

country_event = {
	id = ev_maintenance.121
	title = "ev_maintenance.101.title"
	desc = {
		text = ev_maintenance.101.desc.1
	}
	desc = {
		text = ev_maintenance.101.desc.2
	}
	desc = {
		text = ev_maintenance.101.desc.3
	}
	picture = GFX_evt_galactic_senate
	is_triggered_only = yes
	option = {
		name = ev_maintenance.121.a
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value >= 100
			}
		}
		add_resource = {
			influence = -100
		}
		change_variable = {
			which = ev_maintenance_value
			value = 4
		}
	}
	option = {
		name = ev_maintenance.121.b
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value >= 20
			}
		}
		add_resource = {
			influence = -20
		}
		change_variable = {
			which = ev_maintenance_value
			value = 1
		}
	}
	option = {
		name = ev_maintenance.121.c
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = -2
			}
		}
	}
	option = {
		name = ev_maintenance.101.d
		trigger = {
			has_civic = civic_ev_police_ship
		}
		ai_chance = {
			factor = 10
		}
		add_resource = {
			influence = -10
		}
		add_monthly_resource_mult = {
			resource = energy
			max = -100
			value = -1
		}
	}
}

country_event = {
	id = ev_maintenance.122
	title = "ev_maintenance.102.title"
	desc = {
		text = ev_maintenance.102.desc.1
	}
	desc = {
		text = ev_maintenance.102.desc.2
	}
	desc = {
		text = ev_maintenance.102.desc.3
	}
	picture = GFX_evt_alien_propaganda
	is_triggered_only = yes
	option = {
		name = ev_maintenance.122.a
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value >= 1500
			}
		}
		owner = {
			add_resource = {
				energy = -1200
			}
		}
		locked_random_list = {
			1 = {
				add_monthly_resource_mult = {
					resource = energy
					max = -400
					value = -3
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = alloys
					max = -300
					value = -3
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = minerals
					max = -400
					value = -3
				}
			}
		}
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = 3
			}
		}
	}
	option = {
		name = ev_maintenance.122.b
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value >= 100
			}
		}
		owner = {
			add_resource = {
				energy = -100
			}
		}
		locked_random_list = {
			1 = {
				add_monthly_resource_mult = {
					resource = energy
					max = -400
					value = -2
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = alloys
					max = -300
					value = -2
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = minerals
					max = -400
					value = -2
				}
			}
		}
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = -2
			}
		}
	}
	option = {
		name = ev_maintenance.112.d
		trigger = {
			has_civic = civic_ev_police_ship
		}
		ai_chance = {
			factor = 10
		}
		add_resource = {
			influence = -10
		}
		add_monthly_resource_mult = {
			resource = energy
			max = -100
			value = -1
		}
	}
}

country_event = {
	id = ev_maintenance.123
	title = "ev_maintenance.103.title"
	desc = {
		text = ev_maintenance.103.desc.1
	}
	desc = {
		text = ev_maintenance.103.desc.2
	}
	desc = {
		text = ev_maintenance.103.desc.3
	}
	desc = {
		text = ev_maintenance.103.desc.4
	}
	picture = GFX_evt_exploding_ship
	is_triggered_only = yes
	option = {
		name = ev_maintenance.103.a
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = -2
			}
		}
	}
	option = {
		name = ev_maintenance.103.b
		allow = {
			resource_stockpile_compare = {
				resource = energy
				value >= 500
			}
		}
		locked_random_list = {
			1 = {
				add_monthly_resource_mult = {
					resource = energy
					max = -400
					value = -1
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = alloys
					max = -300
					value = -2
				}
			}
			1 = {
				add_monthly_resource_mult = {
					resource = minerals
					max = -400
					value = -1
				}
			}
		}
		owner = {
			add_resource = {
				energy = -500
			}
		}
		owner = {
			change_variable = {
				which = ev_maintenance_value
				value = -1
			}
		}
	}
	option = {
		name = ev_maintenance.103.c
		trigger = {
			has_civic = civic_ev_police_ship
		}
		ai_chance = {
			factor = 10
		}
		add_resource = {
			influence = -10
		}
	}
}

ship_event = {
	id = ev_maintenance.150
	title = "ev_maintenance.100.title"
	desc = {
		text = ev_maintenance.150.desc.1
	}
	picture = GFX_evt_space_station
	#	hide_window = yes
	is_triggered_only = yes
	immediate = {
		this = {
			save_event_target_as = ev_this_ship
		}
	}
	option = {
		name = ev_maintenance.150.a
		owner = {
			locked_random_list = {
				1 = {
					add_monthly_resource_mult = {
						resource = energy
						max = -300
						value = -5
					}
				}
				1 = {
					add_monthly_resource_mult = {
						resource = minerals
						max = -300
						value = -5
					}
				}
				1 = {
					add_monthly_resource_mult = {
						resource = alloys
						max = -300
						value = -5
					}
				}
				1 = {
					add_monthly_resource_mult = {
						resource = consumer_goods
						max = -300
						value = -5
					}
				}
			}
			locked_random_list = {
				1 = {
					add_monthly_resource_mult = {
						resource = energy
						max = -300
						value = -5
					}
				}
				1 = {
					add_monthly_resource_mult = {
						resource = minerals
						max = -300
						value = -5
					}
				}
				1 = {
					add_monthly_resource_mult = {
						resource = food
						max = -300
						value = -5
					}
				}
				1 = {
					add_monthly_resource_mult = {
						resource = unity
						max = -300
						value = -5
					}
				}
			}
		}
	}
	option = {
		name = ev_maintenance.150.b
		random_list = {
			40 = {
				custom_tooltip = custom_tooltip_ev_maintenance.150.b
				destroy_ship = event_target:ev_this_ship
			}
			40 = {
				#owner = {
				#	add_monthly_resource_mult = {
				#		resource = manpower
				#		max = -50
				#		value = -6
				#	}
				#}
			}
			20 = {
			}
		}
	}
	option = {
		name = ev_maintenance.150.c
		trigger = {
			owner = {
				has_civic = civic_ev_police_ship
			}
		}
		owner = {
			add_resource = {
				influence = -10
			}
			locked_random_list = {
				1 = {
					add_monthly_resource_mult = {
						resource = energy
						max = -300
						value = -2
					}
				}
				1 = {
					add_monthly_resource_mult = {
						resource = minerals
						max = -300
						value = -2
					}
				}
				1 = {
					add_monthly_resource_mult = {
						resource = food
						max = -300
						value = -2
					}
				}
			}
		}
	}
}

#犯罪舰队获得加成
country_event = {
	id = ev_maintenance.300
	title = "ev_maintenance.300.title"
	desc = ev_maintenance.300.desc
	location = from	#event_target:has_building_criminal_boss_planet
	picture = GFX_evt_derelict_interior
	is_triggered_only = yes
	trigger = {
		has_civic = civic_ev_criminal_ship
	}
	option = {
		name = ev_maintenance.300.a
		#clear_global_event_target = has_building_criminal_boss_planet
		owner = {
			owner = {
				add_resource = {
					energy = 200
				}
			}
			change_variable = {
				which = ev_maintenance_value
				value = 1
			}
		}
	}
}

#紧急征召
country_event = {
	id = ev_maintenance.400
	title = "ev_maintenance.400.title"
	desc = ev_maintenance.400.desc
	picture = GFX_evt_derelict_interior
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_country_flag = ev_has_maintenance_fleet_event
		}
	}
	after = {
		remove_country_flag = ev_has_maintenance_fleet_event
	}
	option = {
		name = ev_maintenance.400.a
		#allow = { 
		#	defender_war_exhaustion > 0.20
		#}
		custom_tooltip = ev_maintenance.400.a.tooltip
		trigger = {
			check_variable = {
				which = ev_maintenance_value
				value > 0
			}
		}
		hidden_effect = {
			random_planet_within_border = {
				save_event_target_as = ev_spwan_maintenance_fleet
			}
			create_fleet_from_naval_cap = 0.2
			last_created_fleet = {
				set_location = {
					target = event_target:ev_spwan_maintenance_fleet
					distance = 100
					angle = random
				}
			}
			owner = {
				change_variable = {
					which = ev_maintenance_value
					value = -20
				}
			}
			owner = {
				set_timed_country_flag = {
					flag = ev_has_maintenance_fleet
					days = 720
				}
			}
		}
	}
	option = {
		name = ev_maintenance.400.b
		#allow = { 
		#	defender_war_exhaustion > 0.25
		#}
		trigger = {
			check_variable = {
				which = ev_maintenance_value
				value > 40
			}
		}
		custom_tooltip = ev_maintenance.400.b.tooltip
		hidden_effect = {
			random_planet_within_border = {
				save_event_target_as = ev_spwan_maintenance_fleet
			}
			while = {
				count = 3
				create_fleet_from_naval_cap = 0.2
				last_created_fleet = {
					set_location = {
						target = event_target:ev_spwan_maintenance_fleet
						distance = 100
						angle = random
					}
				}
			}
			owner = {
				change_variable = {
					which = ev_maintenance_value
					value = -60
				}
			}
			owner = {
				set_timed_country_flag = {
					flag = ev_has_maintenance_fleet
					days = 720
				}
			}
		}
	}
	option = {
		name = ev_maintenance.400.c
	}
}

#新版本的维持度事件
country_event = {
	id = ev_maintenance.500
	title = "ev_maintenance.500.title"
	desc = ev_maintenance.500.desc
	picture = GFX_evt_news_room
	mean_time_to_happen = {
		months = 50
		modifier = {
			factor = 20
			has_country_flag = trigger_maintenance_120_month
		}
		modifier = {
			factor = 10
			has_country_flag = trigger_maintenance_60_month
		}
		modifier = {
			factor = 4
			has_country_flag = trigger_maintenance_24_month
		}
		modifier = {
			factor = 2
			has_country_flag = trigger_maintenance_12_month
		}
		modifier = {
			factor = 1.5
			has_country_flag = trigger_maintenance_6_month
		}
		modifier = {
			factor = 0.9
			check_variable = {
				which = ev_maintenance_value
				value > 50
			}
		}
		modifier = {
			factor = 0.9
			check_variable = {
				which = ev_maintenance_value
				value > 70
			}
		}
		modifier = {
			factor = 0.9
			check_variable = {
				which = ev_maintenance_value
				value > 85
			}
		}
		modifier = {
			factor = 0.9
			check_variable = {
				which = ev_maintenance_value
				value > 110
			}
		}
		modifier = {
			factor = 2
			is_ai = yes
		}
	}
	immediate = {
		#计算变量
		hidden_effect = {
			export_resource_income_to_variable = {
				resource = unity
				variable = ev_unity_income
			}
		}
		
		#描述的文本
		#数字指的是具体事件类型.比如贿赂选民，腐败等
		#a-z小写字母指的是国家的民众或者精英等对其的了解与认知程度，比如民众不了解/精英阶层略有了解
		#A-Z大写字母指的是这件事所影响的范围，比如单个舰船/几个舰船/整个舰队等
		random_list = {
			1 = {
				set_country_flag = ev_maintenance_500_01
			}
			1 = {
				set_country_flag = ev_maintenance_500_02
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						has_authority = auth_democratic
					}
				}
				set_country_flag = ev_maintenance_500_03
			}
			1 = {
				set_country_flag = ev_maintenance_500_04
			}
			1 = {
				modifier = {
					factor = 2
					OR = {
						has_ethic = ethic_fanatic_authoritarian
						has_ethic = ethic_authoritarian
						has_ethic = ethic_fanatic_xenophobe
						has_ethic = ethic_xenophobe
					}
				}
				set_country_flag = ev_maintenance_500_05
			}
			1 = {
				set_country_flag = ev_maintenance_500_06
			}
			1 = {
				set_country_flag = ev_maintenance_500_07
			}
			1 = {
				modifier = {
					factor = 0
					NOR = {
						has_ethic = ethic_fanatic_materialist
						has_ethic = ethic_materialist
					}
				}
				modifier = {
					factor = 2
					OR = {
						has_ethic = ethic_fanatic_spiritualist
						has_ethic = ethic_spiritualist
					}
				}
				set_country_flag = ev_maintenance_500_08
			}
			1 = {
				set_country_flag = ev_maintenance_500_09
			}
			1 = {
				modifier = {
					factor = 0.5
					NOR = {
						has_ethic = ethic_fanatic_materialist
						has_ethic = ethic_materialist
					}
				}
				set_country_flag = ev_maintenance_500_10
			}
			1 = {
				set_country_flag = ev_maintenance_500_11
			}
			1 = {
				set_country_flag = ev_maintenance_500_12
			}
			1 = {
				modifier = {
					factor = 2
					OR = {
						has_ethic = ethic_fanatic_egalitarian
						has_ethic = ethic_egalitarian
						has_authority = auth_democratic
					}
				}
				set_country_flag = ev_maintenance_500_13
			}
			1 = {
				set_country_flag = ev_maintenance_500_14
			}
			1 = {
				set_country_flag = ev_maintenance_500_15
			}
			1 = {
				set_country_flag = ev_maintenance_500_16
			}
			1 = {
				set_country_flag = ev_maintenance_500_17
			}
			1 = {
				set_country_flag = ev_maintenance_500_18
			}
			1 = {
				set_country_flag = ev_maintenance_500_19
			}
		}
		random_list = {
			1 = {
				set_country_flag = ev_maintenance_500_a
			}
			1 = {
				set_country_flag = ev_maintenance_500_b
			}
			1 = {
				set_country_flag = ev_maintenance_500_c
			}
			1 = {
				set_country_flag = ev_maintenance_500_d
			}
			1 = {
				set_country_flag = ev_maintenance_500_e
			}
			1 = {
				set_country_flag = ev_maintenance_500_f
			}
		}
		random_list = {
			1 = {
				set_country_flag = ev_maintenance_500_A
			}
			1 = {
				set_country_flag = ev_maintenance_500_B
			}
			1 = {
				set_country_flag = ev_maintenance_500_C
			}
			1 = {
				set_country_flag = ev_maintenance_500_D
			}
			1 = {
				set_country_flag = ev_maintenance_500_E
			}
		}
		#选项的文本
		random_list = {
			1 = {
				set_country_flag = ev_maintenance_500_option_1
			}
			1 = {
				set_country_flag = ev_maintenance_500_option_2
			}
			1 = {
				set_country_flag = ev_maintenance_500_option_3
			}
			1 = {
				set_country_flag = ev_maintenance_500_option_4
			}
		}
		#标题文本
		random_list = {
			1 = {
				set_country_flag = ev_maintenance_500_title_1
			}
			1 = {
				set_country_flag = ev_maintenance_500_title_2
			}
			1 = {
				set_country_flag = ev_maintenance_500_title_3
			}
		}
		#随机触发可见的选项
		while = {
			count = 2
			random_list = {
				1 = {
					#modifier = {
					#	factor = 0
					#	has_country_flag = ev_maintenance_500_option_a_ok 
					#}
					set_country_flag = ev_maintenance_500_option_a_ok
				}
				1 = {
					#modifier = {
					#	factor = 0
					#	has_country_flag = ev_maintenance_500_option_b_ok 
					#}
					set_country_flag = ev_maintenance_500_option_b_ok
				}
				1 = {
					#modifier = {
					#	factor = 0
					#	has_country_flag = ev_maintenance_500_option_c_ok 
					#}
					set_country_flag = ev_maintenance_500_option_c_ok
				}
			}
		}
		#消除flag
		country_event = {
			id = ev_maintenance.501
			days = 1
		}
	}
	trigger = {
		is_default_ev_country_type = yes
		is_gestalt = no
		years_passed > 12
		NOT = {
			has_country_flag = no_trigger_maintenance_event
		}
	}
	after = {
		remove_country_flag = ev_maintenance_500_01
		remove_country_flag = ev_maintenance_500_02
		remove_country_flag = ev_maintenance_500_03
		remove_country_flag = ev_maintenance_500_04
		remove_country_flag = ev_maintenance_500_05
		remove_country_flag = ev_maintenance_500_06
		remove_country_flag = ev_maintenance_500_07
		remove_country_flag = ev_maintenance_500_08
		remove_country_flag = ev_maintenance_500_09
		remove_country_flag = ev_maintenance_500_10
		remove_country_flag = ev_maintenance_500_11
		remove_country_flag = ev_maintenance_500_12
		remove_country_flag = ev_maintenance_500_13
		remove_country_flag = ev_maintenance_500_14
		remove_country_flag = ev_maintenance_500_15
		remove_country_flag = ev_maintenance_500_16
		remove_country_flag = ev_maintenance_500_17
		remove_country_flag = ev_maintenance_500_18
		remove_country_flag = ev_maintenance_500_a
		remove_country_flag = ev_maintenance_500_b
		remove_country_flag = ev_maintenance_500_c
		remove_country_flag = ev_maintenance_500_d
		remove_country_flag = ev_maintenance_500_e
		remove_country_flag = ev_maintenance_500_f
		remove_country_flag = ev_maintenance_500_A
		remove_country_flag = ev_maintenance_500_B
		remove_country_flag = ev_maintenance_500_C
		remove_country_flag = ev_maintenance_500_D
		remove_country_flag = ev_maintenance_500_E
		remove_country_flag = ev_maintenance_500_option_1
		remove_country_flag = ev_maintenance_500_option_2
		remove_country_flag = ev_maintenance_500_option_3
		remove_country_flag = ev_maintenance_500_option_4
		remove_country_flag = ev_maintenance_500_title_1
		remove_country_flag = ev_maintenance_500_title_2
		remove_country_flag = ev_maintenance_500_title_3
		remove_country_flag = ev_maintenance_500_option_a_ok
		remove_country_flag = ev_maintenance_500_option_b_ok
		remove_country_flag = ev_maintenance_500_option_c_ok
		hidden_effect = {
			if = {
				limit = { 
					check_variable = {
						which = ev_struggle_value
						value > 25
					} 
				}
				set_variable = {
					which = ev_struggle_value
					value = 25
				}
			}

			if = {
				limit = { 
					check_variable = {
						which = ev_struggle_value
						value < -5
					} 
				}
				set_variable = {
					which = ev_struggle_value
					value = -5
				}
			}
		}
	}
	option = {
		#100%全力
		name = ev_maintenance.500.a
		#random_maintenance_high_effect = yes
		new_random_maintenance_effect = { NUM = -5 }
		#change_variable = {
		#	which = ev_maintenance_value
		#	value = 15
		#}
		remove_modifier = ev_maintenance_500_buff_new
		
		add_modifier = {
			modifier = ev_maintenance_500_buff_new multiplier = 2.5 days = 240
		}
		remove_modifier = ev_maintenance_modifier_event
		add_modifier = {
			modifier = ev_maintenance_modifier_event multiplier = 15 days = 240
		}
		hidden_effect = {
			change_variable = {
				which = ev_struggle_value
				value = -0.8
			}
		}
	}
	option = {
		#75%全力
		name = ev_maintenance.500.b
		new_random_maintenance_effect = { NUM = -3 }
		#random_maintenance_mid_effect = yes
		trigger = {
			has_country_flag = ev_maintenance_500_option_a_ok
		}
		remove_modifier = ev_maintenance_500_buff_new
		add_modifier = {
			modifier = ev_maintenance_500_buff_new multiplier = 1.5 days = 240
		}
		remove_modifier = ev_maintenance_modifier_event
		add_modifier = {
			modifier = ev_maintenance_modifier_event multiplier = 10 days = 240
		}
		#change_variable = {
		#	which = ev_maintenance_value
		#	value = 10
		#}
		hidden_effect = {
			change_variable = {
				which = ev_struggle_value
				value = -0.4
			}
		}
	}
	option = {
		#50%全力
		name = ev_maintenance.500.c
		new_random_maintenance_effect = { NUM = -1.25 }
		#random_maintenance_high_effect = yes
		trigger = {
			has_country_flag = ev_maintenance_500_option_b_ok
		}
		#change_variable = {
		#	which = ev_maintenance_value
		#	value = 5
		#}
		remove_modifier = ev_maintenance_500_buff_new
		add_modifier = {
			modifier = ev_maintenance_500_buff_new multiplier = 0.75 days = 240
		}
		remove_modifier = ev_maintenance_modifier_event
		add_modifier = {
			modifier = ev_maintenance_modifier_event multiplier = 5 days = 240
		}
		hidden_effect = {
			change_variable = {
				which = ev_struggle_value
				value = 0.35
			}
		}
	}
	option = {
		#25%全力
		name = ev_maintenance.500.d
		random_maintenance_mid_effect = yes
		new_random_maintenance_effect = { NUM = -0.75 }
		trigger = {
			has_country_flag = ev_maintenance_500_option_c_ok
		}
		remove_modifier = ev_maintenance_500_buff_new
		add_modifier = {
			modifier = ev_maintenance_500_buff_new multiplier = 0.25 days = 240
		}
		remove_modifier = ev_maintenance_modifier_event
		add_modifier = {
			modifier = ev_maintenance_modifier_event multiplier = -10 days = 240
		}
		#change_variable = {
		#	which = ev_maintenance_value
		#	value = -5
		#}
		hidden_effect = {
			change_variable = {
				which = ev_struggle_value
				value = 0.65
			}
		}
	}
	option = {
		#不作为
		name = ev_maintenance.500.e
		#change_variable = {
		#	which = ev_maintenance_value
		#	value = -10
		#}
		remove_modifier = ev_maintenance_modifier_event
		add_modifier = {
			modifier = ev_maintenance_modifier_event multiplier = -25 days = 240
		}
		hidden_effect = {
			change_variable = {
				which = ev_struggle_value
				value = 1.25
			}
		}
	}
	option = {
		#内务部
		name = ev_maintenance.500.f
		trigger = {
			has_civic = civic_ev_police_ship
		}
		new_random_maintenance_effect = { NUM = -0.5 }
		#change_variable = {
		#	which = ev_maintenance_value
		#	value = -2
		#}
		hidden_effect = {
			change_variable = {
				which = ev_struggle_value
				value = 0.02
			}
		}
	}
}

#新版本的维持度事件,消除描述flag
country_event = {
	id = ev_maintenance.501
	hide_window = yes
	is_triggered_only = yes
	picture = GFX_evt_news_room
	immediate = {
		remove_country_flag = ev_maintenance_500_01
		remove_country_flag = ev_maintenance_500_02
		remove_country_flag = ev_maintenance_500_03
		remove_country_flag = ev_maintenance_500_04
		remove_country_flag = ev_maintenance_500_05
		remove_country_flag = ev_maintenance_500_06
		remove_country_flag = ev_maintenance_500_07
		remove_country_flag = ev_maintenance_500_08
		remove_country_flag = ev_maintenance_500_09
		remove_country_flag = ev_maintenance_500_10
		remove_country_flag = ev_maintenance_500_11
		remove_country_flag = ev_maintenance_500_12
		remove_country_flag = ev_maintenance_500_13
		remove_country_flag = ev_maintenance_500_14
		remove_country_flag = ev_maintenance_500_15
		remove_country_flag = ev_maintenance_500_16
		remove_country_flag = ev_maintenance_500_17
		remove_country_flag = ev_maintenance_500_18
		remove_country_flag = ev_maintenance_500_a
		remove_country_flag = ev_maintenance_500_b
		remove_country_flag = ev_maintenance_500_c
		remove_country_flag = ev_maintenance_500_d
		remove_country_flag = ev_maintenance_500_e
		remove_country_flag = ev_maintenance_500_f
		remove_country_flag = ev_maintenance_500_A
		remove_country_flag = ev_maintenance_500_B
		remove_country_flag = ev_maintenance_500_C
		remove_country_flag = ev_maintenance_500_D
		remove_country_flag = ev_maintenance_500_E
		remove_country_flag = ev_maintenance_500_option_1
		remove_country_flag = ev_maintenance_500_option_2
		remove_country_flag = ev_maintenance_500_option_3
		remove_country_flag = ev_maintenance_500_option_4
		remove_country_flag = ev_maintenance_500_title_1
		remove_country_flag = ev_maintenance_500_title_2
		remove_country_flag = ev_maintenance_500_title_3
		#remove_country_flag = ev_maintenance_500_option_a_ok 
		#remove_country_flag = ev_maintenance_500_option_b_ok 
		#remove_country_flag = ev_maintenance_500_option_c_ok 
	}
}

####新的环绕破坏性技术完成
#country_event = {
#	id = ev_maintenance.1000
#	hide_window = yes
#	is_triggered_only = yes
#	trigger = {
#		OR = {
#			last_increased_tech = tech_ev_destructive_mining
#			last_increased_tech = tech_ev_destructive_mining_2
#			last_increased_tech = tech_ev_destructive_mining_3
#		}
#		
#	}
#	immediate = {
#		change_variable = {
#			which = ev_planet_mining_tech_level
#			value = 1
#		}
#		
#	}
#}


country_event = {
	id = ev_maintenance.600
	title = "ev_maintenance.600.name"
	desc = "ev_maintenance.600.desc"
	picture = GFX_evt_cargoship_caravan
	#show_sound = event_power_down
	location = from
	is_triggered_only = yes
	option = {
		name = OK
		
	}
	
}

