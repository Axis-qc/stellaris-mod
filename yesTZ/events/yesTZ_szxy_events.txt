namespace = yesTZ
#选择星球
event = {
    id = yesTZ.1000
    hide_window = yes  # 隐藏窗口
    is_triggered_only = yes  # 仅在触发条件满足时触发
    trigger = {

    }
    immediate = {
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_5
            random_system_planet = {
                set_planet_flag = szxy_planet_5
                add_deposit = yesTZ_alloys_10
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_6
            random_system_planet = {
                set_planet_flag = szxy_planet_6
                add_deposit = yesTZ_alloys_10
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_7
            random_system_planet = {
                set_planet_flag = szxy_planet_7
                add_deposit = yesTZ_alloys_10
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_8
            random_system_planet = {
                set_planet_flag = szxy_planet_8
                add_deposit = yesTZ_alloys_10
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_9
            random_system_planet = {
                set_planet_flag = szxy_planet_9
                add_deposit = yesTZ_alloys_10
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_10
            random_system_planet = {
                set_planet_flag = szxy_planet_10
                add_deposit = yesTZ_alloys_10
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_11
            random_system_planet = {
                set_planet_flag = szxy_planet_11
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_12
            random_system_planet = {
                set_planet_flag = szxy_planet_12
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_13
            random_system_planet = {
                set_planet_flag = szxy_planet_13
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_14
            random_system_planet = {
                set_planet_flag = szxy_planet_14
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_15
            random_system_planet = {
                set_planet_flag = szxy_planet_15
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_16
            random_system_planet = {
                set_planet_flag = szxy_planet_16
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_17
            random_system_planet = {
                set_planet_flag = szxy_planet_17
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_18
            random_system_planet = {
                set_planet_flag = szxy_planet_18
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_19
            random_system_planet = {
                set_planet_flag = szxy_planet_19
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_20
            random_system_planet = {
                set_planet_flag = szxy_planet_20
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_21
            random_system_planet = {
                set_planet_flag = szxy_planet_21
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_22
            random_system_planet = {
                set_planet_flag = szxy_planet_22
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_23
            random_system_planet = {
                set_planet_flag = szxy_planet_23
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_24
            random_system_planet = {
                set_planet_flag = szxy_planet_24
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_25
            random_system_planet = {
                set_planet_flag = szxy_planet_25
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_26
            random_system_planet = {
                set_planet_flag = szxy_planet_26
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_27
            random_system_planet = {
                set_planet_flag = szxy_planet_27
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_28
            random_system_planet = {
                set_planet_flag = szxy_planet_28
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_29
            random_system_planet = {
                set_planet_flag = szxy_planet_29
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_30
            random_system_planet = {
                set_planet_flag = szxy_planet_30
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_31
            random_system_planet = {
                set_planet_flag = szxy_planet_31
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_32
            random_system_planet = {
                set_planet_flag = szxy_planet_32
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_33
            random_system_planet = {
                set_planet_flag = szxy_planet_33
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_34
            random_system_planet = {
                set_planet_flag = szxy_planet_34
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_35
            random_system_planet = {
                set_planet_flag = szxy_planet_35
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_36
            random_system_planet = {
                set_planet_flag = szxy_planet_36
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_37
            random_system_planet = {
                set_planet_flag = szxy_planet_37
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_38
            random_system_planet = {
                set_planet_flag = szxy_planet_38
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_39
            random_system_planet = {
                set_planet_flag = szxy_planet_39
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_40
            random_system_planet = {
                set_planet_flag = szxy_planet_40
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_41
            random_system_planet = {
                set_planet_flag = szxy_planet_41
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_42
            random_system_planet = {
                set_planet_flag = szxy_planet_42
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_43
            random_system_planet = {
                set_planet_flag = szxy_planet_43
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_44
            random_system_planet = {
                set_planet_flag = szxy_planet_44
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_45
            random_system_planet = {
                set_planet_flag = szxy_planet_45
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_46
            random_system_planet = {
                set_planet_flag = szxy_planet_46
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_47
            random_system_planet = {
                set_planet_flag = szxy_planet_47
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_48
            random_system_planet = {
                set_planet_flag = szxy_planet_48
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_49
            random_system_planet = {
                set_planet_flag = szxy_planet_49
            }
        }
        random_system = {
            limit = {
                no_star_flag = yes
            }
            set_star_flag = szxy_star_50
            random_system_planet = {
                set_planet_flag = szxy_planet_50
            }
        }
    }
}
#当肃正到来触发
country_event = {
    id = yesTZ.1001
    hide_window = yes  # 隐藏窗口
    is_triggered_only = yes  # 仅在触发条件满足时触发
    fire_only_once = yes
    trigger = {
        any_country = {
            is_country_type = ai_empire
        }
    }
    immediate = {
        random_country = {
            limit = {
                is_country_type = "ai_empire"
            }
            save_global_event_target_as = AI_crisis
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_5 }
            planet_event = { id = yesTZ.1005 days = 180 random = 10 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_6 }
            planet_event = { id = yesTZ.1006 days = 360 random = 10 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_7 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_8 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_9 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_10 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_11 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_12 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_13 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_14 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_15 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_16 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_17 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_18 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_19 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_20 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_21 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_22 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_23 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_24 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_25 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_26 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_27 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_28 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_29 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_30 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_31 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_32 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_33 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_34 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_35 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_36 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_37 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_38 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_39 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_40 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_41 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_42 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_43 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_44 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_45 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_46 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_47 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_48 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_49 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
        random_galaxy_planet = {
            limit = { has_planet_flag = szxy_planet_50 }
            planet_event = { id = yesTZ.1011 days = 1000 random = 100 }
        }
    }
}
#创建舰队
planet_event = {
    id = yesTZ.2051
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        is_planet_class = pc_ai
        NOT = { has_planet_flag = machine_lair }
        owner = { is_country_type = "ai_empire" }
    }

    immediate = {
        owner = { save_event_target_as = AI_crisis }
        create_ai_fleet = yes
        #create_ai_constructors = yes
        planet_event = { id = yesTZ.2051 days = 1500 random = 200 }
    }
}

country_event = {
    id = yesTZ.2031
    title = "yesTZ.2031.name"
    desc = "yesTZ.2031.desc"
    picture = GFX_evt_contingency_planet
    show_sound = event_red_alert
    location = from

    is_triggered_only = yes

    option = {
        name = yesTZ.2031.a
        create_point_of_interest = {
            id = ai_crisis_poi.2
            name = "ai_crisis_poi_2"
            desc = "ai_crisis_poi_2_desc"
            event_chain = "ai_crisis_chain"
            location = from
        }
    }
}
country_event = {
    id = yesTZ.2032
    title = "yesTZ.2032.name"
    desc = "yesTZ.2032.desc"
    picture = GFX_evt_contingency_planet
    show_sound = event_red_alert
    location = from

    is_triggered_only = yes

    option = {
        name = yesTZ.2032.a
        create_point_of_interest = {
            id = ai_crisis_poi.2
            name = "ai_crisis_poi_2"
            desc = "ai_crisis_poi_2_desc"
            event_chain = "ai_crisis_chain"
            location = from
        }
    }
}
#第五个机械球
planet_event = {
    id = yesTZ.1005  # 事件的唯一标识符
    hide_window = yes  # 触发事件时不显示事件窗口

    is_triggered_only = yes  # 该事件仅在满足触发条件时触发
    trigger = {
        #has_global_flag = ai_invasion_happened  # 触发条件：全局标志 "ai_invasion_happened" 是否存在（注释掉了）
        exists = planet
    }

    immediate = {
        change_pc = pc_ai  # 将行星的生产类别改为 AI 类型
        reset_planet = yes  # 重置行星状态
        set_name = "NAME_Sterilization_Hub_5"  # 设置行星名称
        set_owner = event_target:AI_crisis  # 设置行星的所有者为事件目标 "AI_crisis"
        set_controller = event_target:AI_crisis  # 设置行星的控制者为事件目标 "AI_crisis"
        create_ai_planet_defense = yes  # 创建 AI 行星防御
        create_ai_fleet = yes  # 创建 AI 舰队（重复两次，可能为了增加舰队数量）
        every_country = {
            # 针对每个国家执行以下操作
            limit = { is_ai = no }  # 仅针对非 AI 国家
            country_event = { id = yesTZ.2031 }  # 触发国家事件，ID 为 crisis.2031
        }
        planet_event = { id = yesTZ.2051 }  # 触发行星事件，ID 为 crisis.2050（开始舰队增援周期）
        every_country = {
            # 针对每个国家执行以下操作
            limit = { has_event_chain = "ai_crisis_chain" }  # 仅针对具有 "ai_crisis_chain" 事件链的国家
            add_event_chain_counter = {
                # 增加事件链计数器
                event_chain = "ai_crisis_chain"  # 事件链名称
                counter = "active_machine_worlds"  # 计数器名称
                amount = 1  # 增加的数量
            }
        }
        if = {
            # 如果满足以下条件
            limit = {
                has_planet_flag = has_arc_furnace  # 行星是否有标志 "has_arc_furnace"
            }
            set_planet_entity = { entity = pc_molten }  # 设置行星实体为 "pc_molten"
            remove_planet_flag = has_megastructure  # 移除行星标志 "has_megastructure"
            remove_planet_flag = has_arc_furnace  # 移除行星标志 "has_arc_furnace"
            solar_system = {
                # 针对当前星系执行以下操作
                every_system_planet = {
                    # 遍历星系中的每个行星
                    limit = {
                        OR = {
                            # 满足以下任意条件
                            has_modifier = orbital_arc_furnace_1_mod
                            has_modifier = orbital_arc_furnace_2_mod
                            has_modifier = orbital_arc_furnace_3_mod
                            has_modifier = orbital_arc_furnace_4_mod
                        }
                    }
                    dismantle_arc_furnace_effect = yes  # 拆除弧形熔炉效果
                }
                random_system_megastructure = {
                    # 随机选择一个星系中的巨型结构
                    limit = {
                        OR = {
                            # 满足以下任意条件
                            is_megastructure_type = orbital_arc_furnace_1
                            is_megastructure_type = orbital_arc_furnace_2
                            is_megastructure_type = orbital_arc_furnace_3
                            is_megastructure_type = orbital_arc_furnace_4
                            is_megastructure_type = orbital_arc_furnace_restored
                        }
                    }
                    remove_megastructure = this  # 移除该巨型结构
                }
            }
        }
        solar_system = {
            # 针对当前星系执行以下操作
            if = {
                # 如果满足以下条件
                limit = { exists = starbase }  # 星系中是否存在星基
                starbase = {
                    fleet = {
                        destroy_fleet = this  # 销毁星基所属的舰队
                    }
                }
            }
            create_contingency_starbase = yes  # 创建应急星基
            star = {
                # 针对当前恒星执行以下操作
                create_ambient_object = {
                    # 创建环境对象
                    type = "contingency_1"  # 环境对象类型
                    location = this  # 位置为当前恒星
                }
                last_created_ambient_object = {
                    # 针对最后创建的环境对象执行以下操作
                    set_ambient_object_flag = contingency_system_effect  # 设置环境对象标志
                    set_location = {
                        # 设置环境对象位置
                        target = prev  # 目标为上一个对象（恒星）
                        distance = 0  # 距离为 0
                        angle = random  # 角度为随机
                    }
                }
            }
        }
    }
}
#6
planet_event = {
    id = yesTZ.1006
    hide_window = yes

    is_triggered_only = yes
    trigger = {
        #has_global_flag = ai_invasion_happened
        exists = planet
    }

    immediate = {
        change_pc = pc_ai
        reset_planet = yes
        set_name = "NAME_Sterilization_Hub_6"
        set_owner = event_target:AI_crisis
        set_controller = event_target:AI_crisis
        create_ai_planet_defense = yes
        create_ai_fleet = yes
        every_country = {
            # 针对每个国家执行以下操作
            limit = { is_ai = no }
            country_event = { id = yesTZ.2032 }
        }
        planet_event = { id = yesTZ.2051 }
        every_country = {

            limit = { has_event_chain = "ai_crisis_chain" }
            add_event_chain_counter = {
                event_chain = "ai_crisis_chain"
                counter = "active_machine_worlds"
                amount = 1
            }
        }
        if = {
            limit = {
                has_planet_flag = has_arc_furnace
            }
            set_planet_entity = { entity = pc_molten }
            remove_planet_flag = has_megastructure
            remove_planet_flag = has_arc_furnace
            solar_system = {
                every_system_planet = {
                    limit = {
                        OR = {
                            has_modifier = orbital_arc_furnace_1_mod
                            has_modifier = orbital_arc_furnace_2_mod
                            has_modifier = orbital_arc_furnace_3_mod
                            has_modifier = orbital_arc_furnace_4_mod
                        }
                    }
                    dismantle_arc_furnace_effect = yes  # 拆除弧形熔炉效果
                }
                random_system_megastructure = {
                    limit = {
                        OR = {
                            is_megastructure_type = orbital_arc_furnace_1
                            is_megastructure_type = orbital_arc_furnace_2
                            is_megastructure_type = orbital_arc_furnace_3
                            is_megastructure_type = orbital_arc_furnace_4
                            is_megastructure_type = orbital_arc_furnace_restored
                        }
                    }
                    remove_megastructure = this  # 移除该巨型结构
                }
            }
        }
        solar_system = {
            if = {
                limit = { exists = starbase }
                starbase = {
                    fleet = {
                        destroy_fleet = this
                    }
                }
            }
            create_contingency_starbase = yes  # 创建应急星基
            star = {
                create_ambient_object = {
                    type = "contingency_1"
                    location = this
                }
                last_created_ambient_object = {
                    set_ambient_object_flag = contingency_system_effect
                    set_location = {
                        target = prev
                        distance = 0
                        angle = random
                    }
                }
            }
        }
    }
}
#7
#太多了不写了
#通用
planet_event = {
    id = yesTZ.1011
    hide_window = yes

    is_triggered_only = yes
    trigger = {
        #has_global_flag = ai_invasion_happened
        exists = planet
    }

    immediate = {
        change_pc = pc_ai
        reset_planet = yes
        set_name = "NAME_Sterilization_Hub_100"
        set_owner = event_target:AI_crisis
        set_controller = event_target:AI_crisis
        #create_ai_planet_defense = yes
        create_ai_fleet = yes
        #planet_event = { id = yesTZ.2051 }
        every_country = {
            limit = { has_event_chain = "ai_crisis_chain" }
            add_event_chain_counter = {
                event_chain = "ai_crisis_chain"
                counter = "active_machine_worlds"
                amount = 1
            }
        }
        if = {
            limit = {
                has_planet_flag = has_arc_furnace
            }
            set_planet_entity = { entity = pc_molten }
            remove_planet_flag = has_megastructure
            remove_planet_flag = has_arc_furnace
            solar_system = {
                every_system_planet = {
                    limit = {
                        OR = {
                            has_modifier = orbital_arc_furnace_1_mod
                            has_modifier = orbital_arc_furnace_2_mod
                            has_modifier = orbital_arc_furnace_3_mod
                            has_modifier = orbital_arc_furnace_4_mod
                        }
                    }
                    dismantle_arc_furnace_effect = yes  # 拆除弧形熔炉效果
                }
                random_system_megastructure = {
                    limit = {
                        OR = {
                            is_megastructure_type = orbital_arc_furnace_1
                            is_megastructure_type = orbital_arc_furnace_2
                            is_megastructure_type = orbital_arc_furnace_3
                            is_megastructure_type = orbital_arc_furnace_4
                            is_megastructure_type = orbital_arc_furnace_restored
                        }
                    }
                    remove_megastructure = this  # 移除该巨型结构
                }
            }
        }
        solar_system = {
            if = {
                limit = { exists = starbase }
                starbase = {
                    fleet = {
                        destroy_fleet = this
                    }
                }
            }
            create_contingency_starbase = yes  # 创建应急星基
            star = {
                create_ambient_object = {
                    type = "contingency_1"
                    location = this
                }
                last_created_ambient_object = {
                    set_ambient_object_flag = contingency_system_effect
                    set_location = {
                        target = prev
                        distance = 0
                        angle = random
                    }
                }
            }
        }
    }
}